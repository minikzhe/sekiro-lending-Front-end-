function e(){"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[41075],{317835:(e,t,i)=>{i.d(t,{formatFileSize:()=>c});var r=i(866467),o=i(8520);const s=1024,a=Math.pow(s,2),n=Math.pow(s,3),d=Math.pow(s,4);function c(e){let t=0,i="";return e>d?(t=Math.round(e/d*1e3)/1e3,i=(0,r.getLang)("global_tb")):e>n?(t=Math.round(e/n*100)/100,i=(0,r.getLang)("global_gb")):e>a?(t=Math.round(e/a*10)/10,i=(0,r.getLang)("global_mb")):(t=Math.round(e/s),i=(0,r.getLang)("global_kb")),`${(0,o.formatNumber)(t)} ${i}`}},302451:(e,t,i)=>{i.d(t,{freeMentionReplacerReact:()=>a,replaceFreeMention:()=>s});var r=i(846145),o=i(884921);function s(e,t){return e.replace(r.FREE_MENTION,(e=>{const i=r.FREE_MENTION_LINK.exec(e);if(i){let[e,r,s]=i;const a=o.VK_URL_REGEX.exec(r);return a&&(r=a[4]||"/"),t(r,s)}return e}))}function a(e){return(t,i,r)=>e({key:t,href:i,text:r})}},153078:(e,t,i)=>{i.d(t,{setEndOfContentEditable:()=>o});var r=i(298077);const o=e=>{const t=window.getSelection();t?(t.selectAllChildren(e),t.collapseToEnd()):(0,r.logError)(new Error("setEndOfContentEditable: 'selection' must not be null or undefined"))}},673569:(e,t,i)=>{i.d(t,{audioTupleToApiAudio:()=>r.audioTupleToApiAudio});var r=i(245778)},985456:(e,t,i)=>{i.d(t,{CustomScreen:()=>r.CustomScreen,RefSource:()=>r.RefSource});var r=i(30259)},597521:(e,t,i)=>{i.d(t,{isPopUpStickersEnabled:()=>r.isPopUpStickersEnabled});var r=i(224194)},136306:(e,t,i)=>{i.d(t,{formatDateTime:()=>r.formatDateTime});var r=i(224241)},666e3:(e,t,i)=>{i.d(t,{formatFileSize:()=>r.formatFileSize});var r=i(317835)},514683:(e,t,i)=>{i.d(t,{setEndOfContentEditable:()=>r.setEndOfContentEditable});var r=i(153078)},631112:(e,t,i)=>{i.d(t,{showBox:()=>r.showBox,showFastBox:()=>r.showFastBox});var r=i(270959)},336012:(e,t,i)=>{i.d(t,{formatCommentText:()=>d});var r=i(839348),o=i(302451),s=i(148636),a=i(898848),n=i(573859);const d=(e,t=!1)=>{let i=(0,a.clean)(e);return i=(0,o.replaceFreeMention)(i,((e,t)=>`<a href="${e}" rel="noreferrer noopener" target="_blank" data-testid="free-mention-link">${t}</a>`)),i=(0,s.replaceHyperLinks)(i,s.linksReplacer),i=(0,r.replaceMentions)(i),t&&(i=(0,n.emojiToHTML)(i,!0)),i}},872164:(e,t,i)=>{i.d(t,{getAttachmentsString:()=>r});const r=e=>e.map((e=>{switch(e.type){case"photo":return`photo${e.photo.photo_id}`;case"doc":return`doc${e.doc.doc_id}`;case"video":return`video${e.video.video_id}`;case"custom":if("audio"===e.original_type)return`audio${e.custom.audio_id}`;default:return""}})).join(",")},864086:(e,t,i)=>{i.d(t,{getImageSizes:()=>r});const r=e=>Object.keys(e).map((t=>{const[i,r,o]=e[t];return{url:i,src:i,width:r,height:o,type:t}}))},555452:(e,t,i)=>{i.d(t,{getUploadingTitle:()=>r});const r=e=>{const t=e.indexOf("_");return e.slice(-1===t?0:t+1)}},964315:(e,t,i)=>{i.d(t,{formatCommentText:()=>c.formatCommentText,getAttachmentsString:()=>u.getAttachmentsString,getImageSizes:()=>s.getImageSizes,getUploadingTitle:()=>a.getUploadingTitle,isAudioAttachment:()=>n.isAudioAttachment,mapCommentUploadDoc:()=>d.mapCommentUploadDoc,normalizeAttachments:()=>r.normalizeAttachments,parseCommentProps:()=>o.parseCommentProps});var r=i(698808),o=i(915817),s=i(864086),a=i(555452),n=i(799072),d=i(66403),c=i(336012),u=i(872164)},799072:(e,t,i)=>{i.d(t,{isAudioAttachment:()=>r});const r=e=>"custom"===e.type&&"audio"===e.original_type},66403:(e,t,i)=>{i.d(t,{mapCommentUploadDoc:()=>a});var r=i(361121),o=i(864086);const s=({editable:e})=>{if(e)return{photo:{sizes:(0,o.getImageSizes)(e.sizes)}}},a=e=>({type:"doc",doc:{doc_id:e.doc_id,id:(0,r.splitRawId)(e.doc_id).itemId,title:e.title,size:Number(e.size),ext:e.ext,url:e.href,preview:s(e)}})},698808:(e,t,i)=>{i.d(t,{normalizeAttachments:()=>a});var r=i(538522),o=i(866467),s=i(540462);const a=e=>{if(e)return e.reduce(((e,t)=>{const{type:i}=t;let a;switch(i){case"photo":a=(e=>{const t=e.photo;if(!t)return;const i=(0,r.joinRawId)({ownerId:t.owner_id,itemId:t.id}),o=`/photo${i}?list=${t.web_view_token??(0,r.joinRawId)({ownerId:t.owner_id,itemId:t.album_id})}&from=comments`;if(!t.sizes)return;return{type:"photo",photo:{...t,photo_id:i,photo_url:o}}})(t);break;case"video":a=(e=>{const t=e.video;if(!t)return;if(!t.owner_id)return;if(!t.id)return;const i=(0,r.joinRawId)({ownerId:t.owner_id,itemId:t.id}),a=t.access_key||(0,r.joinRawId)({ownerId:t.owner_id,itemId:t.album_id}),n=`/${"short_video"===t.type?"clip":"video"}${i}?list=${a}&from=access_hash`;let d;return(0,s.partConfigEnabled)("interactive_video_redesign_badge_mvk")&&"interactive"===t.type&&(d=(0,o.getLang)("video_interactive_label")),{type:"video",video:{...t,video_id:i,video_url:n,label:d}}})(t);break;case"doc":a=(e=>{const t=e.doc;if(t)return{type:"doc",doc:{...t,doc_id:(0,r.joinRawId)({ownerId:t.owner_id,itemId:t.id})}}})(t);break;case"sticker":a=(e=>{const t=e.sticker;if(t)return{type:"sticker",sticker:t}})(t);break;default:a={type:"custom",original_type:i,custom:t[i]}}return a&&e.push(a),e}),[])}},915817:(e,t,i)=>{i.d(t,{parseCommentProps:()=>s});var r=i(698808);function o(e=[],t=[]){return e.length&&t.length?e.map((e=>{const i=(e=>Object.hasOwn(e,"custom")&&Object.hasOwn(e,"original_type")&&"custom"===e.type)(e)?e.original_type:e.type;return"unsupported"===i?e:t.includes(i)?{type:"custom",original_type:"unsupported",custom:{isUnsupported:!0}}:e})):e}const s=(e,t)=>{const{attachments:i,...s}=e,a=t?.length;return{...s,attachments:a?o((0,r.normalizeAttachments)(i),t):(0,r.normalizeAttachments)(i)}}},233399:(e,t,i)=>{i.d(t,{AnalyticsParamsService:()=>o.AnalyticsParamsService,DeliveryPointsService:()=>o.DeliveryPointsService,GetOwnerDataService:()=>o.GetOwnerDataService,LocalOrderService:()=>o.LocalOrderService,constructProductLink:()=>r.constructProductLink,convertPriceToFloat:()=>r.convertPriceToFloat,findCategoryById:()=>r.findCategoryById,flatCategoryTree:()=>r.flatCategoryTree,getBadgesConfig:()=>s.getBadgesConfig,getCreateOrderErrorMessageByCode:()=>r.getCreateOrderErrorMessageByCode,getImage:()=>r.getImage,getImageIsomorphic:()=>r.getImageIsomorphic,getImagePaginationConfig:()=>s.getImagePaginationConfig,getMarketProductImgErrorType:()=>s.getMarketProductImgErrorType,getMarketProductTitle:()=>s.getMarketProductTitle,getMiniProductCardPrice:()=>r.getMiniProductCardPrice,getModerationErrorType:()=>s.getModerationErrorType,getPictureConfig:()=>s.getPictureConfig,getStatusBadgeTitle:()=>s.getStatusBadgeTitle,openProductCard:()=>r.openProductCard});var r=i(437573),o=i(613336),s=i(106116)},812532:(e,t,i)=>{var r=i(331635),o=i(132028),s=i(54490);class a{logBaseEvent({event:e,screen:t,item:i}){this.productionStats.send({screen:t,type:"type_click",type_click:{item:i,type:"type_market_click",type_market_click:e}})}addMarketItemToBookmarksClick({screen:e,previousScreen:t,params:i,item:r,refSource:o}){this.logBaseEvent({screen:e,item:r,event:{type:"type_marketplace_add_to_bookmarks_click",previous_screen:t,ref_source:o,type_marketplace_add_to_bookmarks_click:i}})}removeMarketItemToBookmarksClick({screen:e,previousScreen:t,params:i,item:r,refSource:o}){this.logBaseEvent({screen:e,item:r,event:{type:"type_marketplace_remove_from_bookmarks_click",previous_screen:t,ref_source:o,type_marketplace_remove_from_bookmarks_click:i}})}imagePaginationClick({item:e,screen:t,itemMediaIdx:i,previousScreen:r,trafficSource:o,refSource:s}){this.logBaseEvent({screen:t,item:e,event:{type:"type_market_pagination_in_product_tile",previous_screen:r||"other",ref_source:s,type_market_pagination_in_product_tile:{item_media_idx:i??1,traffic_source:o||""}}})}ctaButtonClick({itemId:e,ownerId:t,screen:i,refSource:r,previousScreen:o,params:s}){this.logBaseEvent({screen:i,item:{id:e,owner_id:t,type:"market_item"},event:{type:"type_market_cta_button_click",previous_screen:o||"other",ref_source:r,type_market_cta_button_click:s}})}constructor(e){this.productionStats=e}}a=(0,r.__decorate)([o.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===s.ProductionStats?Object:s.ProductionStats])],a)},596316:(e,t,i)=>{var r=i(331635),o=i(132028),s=i(54490);class a{logBaseEvent({event:e,item:t,screen:i}){this.productionStats.send({screen:i,type:"type_view",type_view:{item:t,type:"type_market_view",type_market_view:e}})}marketItemView({screen:e,params:t,item:i,previousScreen:r,refSource:o}){this.logBaseEvent({screen:e,item:i,event:{type:"type_marketplace_item_view",previous_screen:r,ref_source:o||"marketplace",analytics_version:1,type_marketplace_item_view:t}})}constructor(e){this.productionStats=e}}a=(0,r.__decorate)([o.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===s.ProductionStats?Object:s.ProductionStats])],a)},414187:(e,t,i)=>{i(812532),i(596316)},115102:(e,t,i)=>{i.d(t,{getBadgesConfig:()=>o});var r=i(831505);const o=({badges:e=[]})=>({hasOzon:e.some((({type:e})=>e===r.MarketBadgeTypeEnumNames.OZON))})},220537:(e,t,i)=>{i.d(t,{getImagePaginationConfig:()=>a});var r=i(8520),o=i(908671),s=i(233399);const a=({thumbs:e,itemWidth:t,onClick:i})=>{if(!e||!Array.isArray(e))return{};const a=e.map((e=>{const i=(0,s.getImageIsomorphic)({images:e,width:t,isRetina:(0,r.isRetina)()});if(i)return i.url})).filter((e=>void 0!==e));return 0===a.length?{}:{imagesSrc:a,onPaginationMove:i,formatBulletsAriaLabel:e=>(0,o.formatCount)(e)}}},824330:(e,t,i)=>{i.d(t,{getMarketProductImgErrorType:()=>r});const r=({isBlocked:e=!1,isMuted:t=!1})=>e?"block":t?"mute":void 0},182035:(e,t,i)=>{i.d(t,{getMarketProductTitle:()=>r});const r=({hasModerationStatus:e=!1,isAdult:t=!1,text:i,langs:r})=>e?r.getLang("market_item_is_disabled"):t?r.getLang("market_item_card_component_title_adult"):i},102340:(e,t,i)=>{i.d(t,{getModerationErrorType:()=>o});var r=i(993394);const o=e=>{const t=e.reject_info?.moderation_status,i=e.reject_info?.in_progress,o=0===e.stock_amount,s=0===e.availability;return i?"moderation":e.is_hardblocked?"hard":t===r.MARKET_MODERATION_STATUS.NONE?"moderation":t===r.MARKET_MODERATION_STATUS.SOFT_BLOCKED||o||!s?"soft":t===r.MARKET_MODERATION_STATUS.HARD_BLOCKED?"hard":void 0}},310574:(e,t,i)=>{i.d(t,{getPictureConfig:()=>s});var r=i(8520),o=i(233399);const s=({isAdult:e,item:t,itemWidth:i,href:s,onClick:a,langs:n})=>{const d=t.thumb||[],c=(0,o.getImageIsomorphic)({images:d,width:i,isRetina:(0,r.isRetina)()}),u=e?n.getLang("market_item_card_blurred_image_caption"):t.title;return{src:c?c.url:void 0,alt:u,href:s,onClick:a}}},294485:(e,t,i)=>{i.d(t,{getStatusBadgeTitle:()=>o});var r=i(831505);const o=({item:e,moderationErrorType:t,isAdultConfirmed:i,langs:o})=>{const s=e.is_adult&&!i;if(e.is_owner){const i="base"===e.owner_info?.market_type&&e.availability===r.MarketMarketItemAvailabilityEnumNames.UNAVAILABLE,s=e.availability===r.MarketMarketItemAvailabilityEnumNames.REMOVED||i;return"moderation"===t?o.getLang("market_item_card_component_badge_title_moderation"):"hard"===t?o.getLang("market_item_card_component_badge_title_hard_block"):s?o.getLang("market_classifieds_status_archive"):e.availability===r.MarketMarketItemAvailabilityEnumNames.UNAVAILABLE||0===e.stock_amount?o.getLang("market_single_cart_product_unavailable_text"):void 0}if("hard"!==t&&"moderation"!==t)return s?o.getLang("market_item_card_component_badge_title_adult"):0===e.stock_amount||0!==e.availability?o.getLang("market_single_cart_product_unavailable_text"):void 0}},106116:(e,t,i)=>{i.d(t,{getBadgesConfig:()=>r.getBadgesConfig,getImagePaginationConfig:()=>o.getImagePaginationConfig,getMarketProductImgErrorType:()=>s.getMarketProductImgErrorType,getMarketProductTitle:()=>a.getMarketProductTitle,getModerationErrorType:()=>n.getModerationErrorType,getPictureConfig:()=>d.getPictureConfig,getStatusBadgeTitle:()=>c.getStatusBadgeTitle});var r=i(115102),o=i(220537),s=i(824330),a=i(182035),n=i(102340),d=i(310574),c=i(294485);i(414187)},111995:(e,t,i)=>{i.d(t,{AnalyticsParamsService:()=>d});var r=i(327813),o=i(985456),s=i(225741),a=i(566699),n=i(437573);class d{get refPostId(){return this._refPostId}get refSource(){return this._refSource}get itemIdx(){return this._itemIdx}get screen(){return this._screen}setAdsLabel(e){this._adsLabel=e}get adsLabel(){return this._adsLabel}get previousScreen(){return this._previousScreen}get searchQueryId(){return this._searchQueryId}get query(){return this._query}get sourceUrl(){return this._sourceUrl}get trackCode(){return this._trackCode}get trafficSource(){return this._trafficSource}get adCampaign(){return this._adCampaign}get searchTrackCode(){return this._searchTrackCode}constructor(e,t){(0,r.makeAutoObservable)(this);const i=(0,n.getTrackCodeParams)(e);this._refSource=e.utm_ref_source??e.ref_source??o.RefSource.LINK,this._itemIdx=Number(e.utm_item_idx??e.item_idx)??0,this._previousScreen=e.utm_previous_screen??e.previous_screen??"other",this._screen=e.utm_screen??e.screen??"other",this._adsLabel=e.ads_label,this._searchQueryId=Number(e.utm_search_query_id??e.search_query_id)??0,this._query=e.query??"",this._trackCode=e.utm_track_code??e.track_code??"",this._trafficSource=e.utm_ref??e.utm_traffic_source??e.traffic_source??"",this._refPostId=e.utm__post??e._post,e.search_track_code&&(this._searchTrackCode=e.search_track_code),this._sourceUrl=`${(0,s.getHostName)()}${t}?${(0,a.toQueryString)(i,!0)}`,this._adCampaign={id:i.ad_campaign_id,name:i.ad_campaign,source:i.ad_campaign_source,medium:i.ad_campaign_medium,term:i.ad_campaign_term,content:i.ad_campaign_content}}}},565858:(e,t,i)=>{i.d(t,{DeliveryPointsService:()=>l});var r=i(331635),o=i(327813),s=i(470388),a=i(526957),n=i(955060),d=i(132028);const c="new_request",u={serviceIds:[1,2,3,4,5,6,7],radius:0,totalCount:0,requestCount:0,loadedCount:0,offset:0,cityId:0,point:null,isUseLazyLoad:!0};class l{[d.destroy](){this._reactions.destroy()}setGroupId(e){this._groupId=e}get serviceIds(){return this._config.serviceIds}setServiceIds(e){this._config.serviceIds=e}get deliveryPoints(){return this._deliveryPoints}get filters(){return this._filters}get isFiltersChanged(){for(let e of this._filters.values()){if(e.list?.some((e=>e.is_enabled!==e.default))??!1)return!0}return!1}get isLoading(){return"loading"===this._status||"loadingNext"===this._status}get isError(){return"error"===this._status}get isLoaded(){return"loaded"===this._status}get isNetworkError(){return this._isNetworkError}get requestParams(){let e=0;const t=this._config.totalCount-this._config.loadedCount;e=this._config.loadedCount>0&&t<this._config.requestCount?t:this._config.requestCount;const i={group_id:this._groupId,country_id:1,city_id:this._config.cityId,service_ids:this.serviceIds.join(","),filters:this.filtersString,radius:this._config.radius,count:e,offset:this._config.offset};return this._config.point&&(i.latitude=this._config.point.lat,i.longitude=this._config.point.lng),i}_getDeliveryPointsFailure(e){if(!("type"in e)||"network_error"!==e.type)throw e instanceof Error&&this._errorLogger.log(e),this._setStatus("error"),e;"error"in e&&e?.error!==c&&(this._isNetworkError=!0,this._setStatus("initial"))}async _getNextDeliveryPoints(){this._isNetworkError=!1,this._setStatus("loadingNext"),this._controller?.abort(c);const e=new AbortController;this._controller=e;try{const t={signal:e.signal},{items:i}=await this._marketApi.getCheckoutDeliveryPoints(this.requestParams,t);this._getDeliveryPointsNextSucceed(i)}catch(e){this._getDeliveryPointsFailure(e)}finally{this._controller===e&&(this._controller=null)}}get filtersString(){if(!this._filters.size)return"";const e=[];return this._filters.forEach((t=>{const i=[];t.list?.forEach((e=>{e.is_enabled&&i.push(e.value)})),i.length&&e.push({field:t.field,values:i})})),e.length?JSON.stringify(e):""}_setStatus(e){this._status=e}_resetDeliveryPoints(){this._deliveryPoints=new Map}resetDefaultFilters(){this._filters.forEach((e=>{e.list?.forEach((e=>{e.is_enabled=e.default}))})),this._lastRequest=()=>this._fetchDeliveryPointsWithUpdatedFilters(),this._lastRequest()}_clearFilters(){this._filters=new Map}_getDeliveryPointsSucceed({count:e,items:t,cityGeo:i,filters:r}){this._lastRequest=null,this._isNetworkError=!1,this._resetDeliveryPoints(),e?(this._config.totalCount=e,this._config.offset=t.length,this._config.loadedCount=this._config.offset,this._cityGeo=i,t.forEach((e=>{this._deliveryPoints.set(e.id,e)})),r&&(this._clearFilters(),r.forEach((e=>{this._filters.set(e.field,e)}))),this._config.isUseLazyLoad&&this._config.loadedCount<e?this._setStatus("needLoadNext"):this._setStatus("loaded")):this._setStatus("loaded")}_getDeliveryPointsNextSucceed(e){this._lastRequest=null,this._isNetworkError=!1,e.forEach((e=>{this._deliveryPoints.set(e.id,e)})),this._config.loadedCount=this._config.offset+e.length,this._config.offset=this._config.loadedCount,this._config.loadedCount>=this._config.totalCount?this._setStatus("loaded"):this._setStatus("needLoadNext")}constructor(e,t){this._marketApi=e,this._errorLogger=t,this._controller=new AbortController,this._status="initial",this._groupId=0,this._config=u,this._deliveryPoints=new Map,this._filters=new Map,this._cityGeo=null,this._reactions=new s.ReactionsAggregator,this._lastRequest=null,this._isNetworkError=!1,this.setFilter=e=>{if(0===this._filters.size||!this.isLoaded)throw Error("Фильтры ещё не загружены");let t=!1;for(let i of e.keys()){if(!this._filters.has(i))continue;const r=e.get(i);this._filters.get(i)?.list?.map((e=>(Array.isArray(r)?e.is_enabled=r.includes(e.value):e.is_enabled=r===e.value,t=!0,e)))}t&&this._fetchDeliveryPointsWithUpdatedFilters()},this.toggleFilter=(e,t)=>{if(0===this._filters.size||!this.isLoaded)throw Error("Фильтры ещё не загружены");this._filters.has(e)&&(this._filters.get(e)?.list?.map((e=>(t!==e.value||(e.is_enabled=!e.is_enabled),e))),this._lastRequest=()=>this._fetchDeliveryPointsWithUpdatedFilters(),this._lastRequest())},this.getDeliveryPoints=e=>(this._lastRequest=()=>this._getDeliveryPoints(e),this._getDeliveryPoints(e)),this._getDeliveryPoints=async({cityId:e,lat:t,lng:i,count:r=1e3,radius:o=300,isUseLazyLoad:s=!0})=>{this._isNetworkError=!1,this._setStatus("loading"),this._controller?.abort(c);const a=new AbortController;this._controller=a;try{this._config.point=i&&t?{lng:i,lat:t}:null,this._config.radius=o,this._config.offset=0,this._config.requestCount=Math.min(1e3,r),this._config.cityId=e,this._config.isUseLazyLoad=s,this._config.loadedCount=0;const n={signal:a.signal},{count:d,items:c,city_geo_position:u,filters:l}=await this._marketApi.getCheckoutDeliveryPoints(this.requestParams,n);this._getDeliveryPointsSucceed({count:d,items:c,cityGeo:u,filters:l})}catch(e){this._getDeliveryPointsFailure(e)}finally{this._controller===a&&(this._controller=null)}},this._fetchDeliveryPointsWithUpdatedFilters=async()=>{this._isNetworkError=!1,this._setStatus("loading"),this._controller?.abort(c);const e=new AbortController;this._controller=e;try{const t={signal:e.signal};this._config.totalCount=0,this._config.loadedCount=0,this._config.offset=0;const{count:i,items:r,city_geo_position:o,filters:s}=await this._marketApi.getCheckoutDeliveryPoints(this.requestParams,t);this._getDeliveryPointsSucceed({count:i,items:r,cityGeo:o,filters:s})}catch(e){this._getDeliveryPointsFailure(e)}finally{this._controller===e&&(this._controller=null)}},this.retryLastRequest=()=>{this._lastRequest?.()},(0,o.makeAutoObservable)(this),this._reactions.reaction((()=>0!==this._deliveryPoints.size&&"needLoadNext"===this._status&&{loadedCount:this._config.loadedCount,totalCount:this._config.totalCount}),(e=>{if(!e)return;const{loadedCount:t,totalCount:i}=e;t>0&&t<i&&(this._lastRequest=()=>this._getNextDeliveryPoints(),this._lastRequest())}))}}l=(0,r.__decorate)([d.scope.transient(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===a.MarketApi?Object:a.MarketApi,void 0===n.ErrorLogger?Object:n.ErrorLogger])],l)},652966:(e,t,i)=>{i.d(t,{GetOwnerDataService:()=>n});var r=i(331635),o=i(327813),s=i(903723),a=i(132028);class n{get ownerGroup(){return this._ownerGroup}get isLoadingOwnerGroup(){return this._isLoadingOwnerGroup}[a.destroy](){this.fetchGroupsByIdsController?.abort("destroy")}constructor(e){this.groupsProvider=e,this._ownerGroup=null,this._isLoadingOwnerGroup=!1,this.fetchGroupsByIdsController=null,this.ensureFetchGroup=async e=>{this.groupsProvider.getGroup(e)||(this._isLoadingOwnerGroup=!0,this.fetchGroupsByIdsController=new AbortController,await this.groupsProvider.fetchGroupsByIds({groupIds:[e],fields:["photo_100"]},{signal:this.fetchGroupsByIdsController.signal})),(0,o.runInAction)((()=>{this._ownerGroup=this.groupsProvider.getGroup(e)??null,this._isLoadingOwnerGroup=!1}))},(0,o.makeAutoObservable)(this)}}n=(0,r.__decorate)([a.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===s.GroupsProvider?Object:s.GroupsProvider])],n)},105735:(e,t,i)=>{i.d(t,{LocalOrderService:()=>d});var r=i(331635),o=i(327813),s=i(510454),a=i(132028),n=i(622746);class d{getLocalStorageKey({orderUserId:e}){return`${n.LOCAL_STORAGE_PAID_ORDERS_KEY}${e}`}getPaidOrders({orderUserId:e}){try{return JSON.parse(this.localStorage.getItem(this.getLocalStorageKey({orderUserId:e}))||"[]")}catch{return[]}}saveOrderLocalPaid({orderUserId:e,orderId:t}){const i=this.getPaidOrders({orderUserId:e}),r=(new Date).getTime();i.push({id:t,timestamp:r}),i.forEach((e=>{if(r-e.timestamp>=n.INVALIDATE_ORDER_PAID_TIME){const t=i.indexOf(e);i.splice(t,1)}})),this.localStorage.setItem(this.getLocalStorageKey({orderUserId:e}),JSON.stringify(i))}checkOrderLocalPaid({orderUserId:e,orderId:t}){const i=this.getPaidOrders({orderUserId:e}),r=(new Date).getTime(),o=i.find((e=>e.id.toString()===t.toString()));if(!o)return!1;if(r-o.timestamp<n.INVALIDATE_ORDER_PAID_TIME)return!0;const s=i.indexOf(o);return i.splice(s,1),this.localStorage.setItem(this.getLocalStorageKey({orderUserId:e}),JSON.stringify(i)),!1}constructor(e){this.localStorage=e,(0,o.makeAutoObservable)(this)}}d=(0,r.__decorate)([a.scope.transient(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===s.LocalStorage?Object:s.LocalStorage])],d)},622746:(e,t,i)=>{i.d(t,{INVALIDATE_ORDER_PAID_TIME:()=>r,LOCAL_STORAGE_PAID_ORDERS_KEY:()=>o});const r=12e4,o="market_paid_orders"},752415:(e,t,i)=>{i.d(t,{LocalOrderService:()=>r.LocalOrderService});var r=i(105735)},613336:(e,t,i)=>{i.d(t,{AnalyticsParamsService:()=>r.AnalyticsParamsService,DeliveryPointsService:()=>o.DeliveryPointsService,GetOwnerDataService:()=>a.GetOwnerDataService,LocalOrderService:()=>s.LocalOrderService});var r=i(111995),o=i(565858),s=i(752415),a=i(652966)},46611:(e,t,i)=>{i.d(t,{getStickerRichProps:()=>r.getStickerRichProps,isPopupStickerAttachment:()=>r.isPopupStickerAttachment});var r=i(380449)},699572:(e,t,i)=>{i.d(t,{getStickerRichProps:()=>n});var r=i(474848),o=i(938321),s=i(46611),a=i(597521);const n=({attachment:e,popupStore:t,wrapperProps:i={}})=>{if((0,s.isPopupStickerAttachment)(e)&&(0,a.isPopUpStickersEnabled)()){const s=e.sticker.popup.layers;return{wrapperProps:{icon:(0,r.jsx)(o.Icon12Play,{}),iconPosition:"rightRelative",iconWrapperRef:void 0,contentClassName:"popupStickerIcon",onContentClick:e=>{e.stopPropagation();const i=e.target;t?.prepareWithDestroyEvent({layers:s,stickerElement:i})},...i}}}}},380449:(e,t,i)=>{i.d(t,{getStickerRichProps:()=>r.getStickerRichProps,isPopupStickerAttachment:()=>o.isPopupStickerAttachment});var r=i(699572),o=i(257357)},257357:(e,t,i)=>{i.d(t,{isPopupStickerAttachment:()=>s});var r=i(642849),o=i(344527);const s=e=>!!e&&((0,r.isStickerAttachment)(e)&&e?.sticker&&(0,o.isPopupSticker)(e.sticker))},375495:(e,t,i)=>{i.d(t,{InputEmojiButton:()=>n});var r=i(474848),o=i(456921),s=i(8520),a=i(275143);const n=(0,o.observer)((function({className:e,children:t}){const{onMouseEnter:i,onMouseLeave:o,ref:n}=(0,a.useHandleEmojiButton)();return(0,r.jsx)("div",{className:(0,s.classNames)(e,"_emoji_wrap"),children:t({className:"_emoji_btn",ref:n,onMouseEnter:i,onMouseLeave:o})})}))},275143:(e,t,i)=>{i.d(t,{useHandleEmojiButton:()=>o});var r=i(296540);const o=()=>{const e=(0,r.useRef)(null),t=(0,r.useRef)(),i=(0,r.useCallback)((i=>{t.current&&clearTimeout(t.current),t.current=setTimeout((()=>{e.current&&window.Emoji.show(e.current,i)}),300)}),[]),o=(0,r.useCallback)((i=>{t.current&&clearTimeout(t.current),e.current&&window.Emoji.hide(e.current,i)}),[]);return{ref:e,onMouseEnter:i,onMouseLeave:o}}},751423:(e,t,i)=>{i.d(t,{InputEmojiButton:()=>r.InputEmojiButton,useEmoji:()=>o.useEmoji});var r=i(375495),o=i(204356)},204356:(e,t,i)=>{i.d(t,{useEmoji:()=>a});var r=i(296540),o=i(514683),s=i(446327);const a=({inputValue:e,inputRef:t,onChangeInput:i,emojiOpts:a})=>{(0,r.useLayoutEffect)((()=>{t.current&&window.Emoji&&e!==window.Emoji.val(t.current)&&(window.Emoji.val(t.current,window.Emoji.emojiToHTML((0,s.clean)(e))),(0,o.setEndOfContentEditable)(t.current))}),[e]),(0,r.useEffect)((()=>{let e=null;return window.stManager.add([window.jsc("web/emoji.js")],(function(){t?.current?e=window.Emoji.init(t.current,a):console.error("Не удалось инициализировать эмодзи из-за отсутствия ref")})),()=>{e&&window.Emoji&&window.Emoji.destroy(e)}}),[]);return{handleInput:e=>{e.preventDefault();const t=e.target;t instanceof HTMLElement&&window.Emoji&&i(window.Emoji.val(t))}}}},993394:(e,t,i)=>{i.d(t,{MARKET_ITEM_LABEL_ACTION_OPEN_MODAL_TYPE:()=>r,MARKET_MODERATION_STATUS:()=>o});const r="open_modal",o={NONE:0,APPROVED:1,SOFT_BLOCKED:2,HARD_BLOCKED:3,NEED_CUT:4,GOT_RESOLUTION:5}},969617:(e,t,i)=>{i.d(t,{VideoFaveService:()=>d});var r=i(331635),o=i(132028),s=i(972573),a=i(327813),n=i(821969);class d{toggle(e,t){const i=this.getIsFavorite(e.id);void 0!==i&&(i?this.remove(e,t):this.add(e,t))}add(e,t){return this.baseFieldService.edit(e.id,(async()=>{const i={owner_id:e.ownerId,id:e.id,source:e.source,ref:e.ref};await this.faveApi.addVideo(i,t),this.setIsFavorite(e.id,!0)}))}remove(e,t){return this.baseFieldService.edit(e.id,(async()=>{const i={owner_id:e.ownerId,id:e.id,source:e.source,ref:e.ref};await this.faveApi.removeVideo(i,t),this.setIsFavorite(e.id,!1)}))}setIsFavorite(e,t){if(void 0!==t)return this.baseFieldService.setValue(e,t)}getIsFavorite(e){return this.baseFieldService.getValue(e)}constructor(e){this.faveApi=e,this.baseFieldService=new n.VideoBaseField,(0,a.makeAutoObservable)(this)}}d=(0,r.__decorate)([o.scope.global(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===s.FaveApi?Object:s.FaveApi])],d)},104403:(e,t,i)=>{i.d(t,{VideoGroupsStore:()=>s});var r=i(327813),o=i(73573);class s{createManyFromApi(e){return e.map(this.createOneFromApi)}getById(e){return this.groupsMap.get(e)}constructor(){this.createOneFromApi=e=>{const t=new o.VideoGroup(e);return this.groupsMap.set(e.id,t),t},this.groupsMap=new Map,(0,r.makeAutoObservable)(this)}}},476205:(e,t,i)=>{i.d(t,{VideoGroupsStoreFactory:()=>d});var r=i(331635),o=i(327813),s=i(132028),a=i(740370),n=i(104403);class d{static filterFields(e){const t=a.VIDEO_GROUP_OPTIONAL_FIELDS;return e.filter((e=>t.includes(e)))}ensureByFields(e){const t=d.getKey(e);return this.ensureByKey(t)}ensureByKey(e){return this.stores.get(e)??this.create(e)}create(e){const t=new n.VideoGroupsStore;return this.stores.set(e,t),t}static getKey(e){return[...new Set(e)].sort().join(",")}constructor(){this.stores=new Map,(0,o.makeAutoObservable)(this)}}d=(0,r.__decorate)([s.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[])],d)},740370:(e,t,i)=>{i.d(t,{VIDEO_GROUP_OPTIONAL_FIELDS:()=>r});const r=["activity","addresses","age_limits","ban_info","can_create_topic","can_message","can_post","can_suggest","can_see_all_posts","can_upload_doc","can_upload_story","can_upload_video","city","contacts","counters","country","cover","crop_photo","description","fixed_post","has_photo","is_favorite","is_hidden_from_feed","is_messages_blocked","links","main_album_id","main_section","market","member_status","members_count","place","public_date_label","site","start_date и finish_date","status","trending","verified","wall","wiki_page"]},129021:(e,t,i)=>{i.d(t,{VideoLikesService:()=>n});var r=i(331635),o=i(132028),s=i(813682),a=i(327813);class n{async add(e,t){const i={type:e.type,owner_id:e.ownerId,item_id:e.itemId,from_group:e.fromGroup};return await this.likesApi.add(i,t)}async remove(e,t){const i={type:e.type,owner_id:e.ownerId,item_id:e.itemId,from_group:e.fromGroup};return await this.likesApi.delete(i,t)}constructor(e){this.likesApi=e,(0,a.makeAutoObservable)(this)}}n=(0,r.__decorate)([o.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===s.LikesApi?Object:s.LikesApi])],n)},562587:(e,t,i)=>{i.d(t,{VideoOwnerStoreFactory:()=>c});var r=i(331635),o=i(327813),s=i(132028),a=i(476205),n=i(349773),d=i(23893);class c{ensureByFields(e){const t=c.getKey(e);return this.stores.get(t)??this.create(t,e)}ensureByKey(e){return this.stores.get(e)??this.create(e)}create(e,t=[]){const i=new d.VideoOwnerStore(this.videoGroupsStoreFactory.ensureByFields(a.VideoGroupsStoreFactory.filterFields(t)),this.videoUsersStoreFactory.ensureByFields(n.VideoUsersStoreFactory.filterFields(t)));return this.stores.set(e,i),i}static getKey(e){return[...new Set(e)].sort().join(",")}constructor(e,t){this.videoGroupsStoreFactory=e,this.videoUsersStoreFactory=t,this.stores=new Map,(0,o.makeAutoObservable)(this)}}c=(0,r.__decorate)([s.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===a.VideoGroupsStoreFactory?Object:a.VideoGroupsStoreFactory,void 0===n.VideoUsersStoreFactory?Object:n.VideoUsersStoreFactory])],c)},828787:(e,t,i)=>{i.d(t,{VideoUsersStore:()=>s});var r=i(327813),o=i(805373);class s{createManyFromApi(e){return e.map(this.createOneFromApi)}getById(e){return this.usersMap.get(e)}constructor(){this.createOneFromApi=e=>{const t=new o.VideoUser(e);return this.usersMap.set(e.id,t),t},this.usersMap=new Map,(0,r.makeAutoObservable)(this)}}},349773:(e,t,i)=>{i.d(t,{VideoUsersStoreFactory:()=>d});var r=i(331635),o=i(327813),s=i(132028),a=i(377860),n=i(828787);class d{static filterFields(e){const t=a.VIDEO_USER_OPTIONAL_FIELDS;return e.filter((e=>t.includes(e)))}ensureByFields(e){const t=d.getKey(e);return this.ensureByKey(t)}ensureByKey(e){return this.stores.get(e)??this.create(e)}create(e){const t=new n.VideoUsersStore;return this.stores.set(e,t),t}static getKey(e){return[...new Set(e)].sort().join(",")}constructor(){this.stores=new Map,(0,o.makeAutoObservable)(this)}}d=(0,r.__decorate)([s.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[])],d)},377860:(e,t,i)=>{i.d(t,{VIDEO_USER_OPTIONAL_FIELDS:()=>r});const r=["about","activities","bdate","blacklisted","blacklisted_by_me","books","can_post","can_see_all_posts","can_see_audio","can_send_friend_request","can_write_private_message","career","city","common_count","connections","contacts","counters","country","crop_photo","deactivated","domain","education","exports","first_name_nom","first_name_gen","first_name_dat","first_name_acc","first_name_ins","first_name_abl","followers_count","friend_status","games","has_mobile","has_photo","home_town","interests","is_favorite","is_friend","is_hidden_from_feed","is_no_index","is_verified","last_name_nom","last_name_gen","last_name_dat","last_name_acc","last_name_ins","last_name_abl","last_seen","lists","maiden_name","military","movies","music","nickname","occupation","online","personal","photo_50","photo_100","photo_200_orig","photo_200","photo_400_orig","photo_id","photo_max","photo_max_orig","quotes","relatives","relation","schools","screen_name","sex","site","status","timezone","trending","tv","universities","verified","is_esia_verified","is_sber_verified","is_tinkoff_verified","wall_default"]},821969:(e,t,i)=>{i.d(t,{VideoBaseField:()=>o});var r=i(327813);class o{getIsLoading(e){return!!this.loadings.get(e)}setValue(e,t){this.data.set(e,t)}getValue(e){return this.data.get(e)}async edit(e,t){if(this.loadings.get(e))return this.loadings.get(e);try{this.loadings.set(e,t()),await this.loadings.get(e)}catch(e){this.errorBoundary(e)}finally{(0,r.runInAction)((()=>{this.loadings.set(e,null)}))}}constructor(e=e=>console.error(e)){this.data=new Map,this.loadings=new Map,this.errorBoundary=e,(0,r.makeAutoObservable)(this)}}},800227:(e,t,i)=>{i.d(t,{convertToBooleanParam:()=>r});const r=e=>{if(void 0!==e)return e?1:0}},457383:(e,t,i)=>{i.d(t,{isVideoData:()=>r});const r=e=>void 0!==e.id&&void 0!==e.owner_id},633084:(e,t,i)=>{i.d(t,{VideoVideosAbstractFetchService:()=>o});var r=i(327813);class o{isPending(e){return Boolean(this.getPending(e))}async fetch(e,t){const i=this.getPending(e);if(i)return i;const o=this.getApiParams(e),s=this.callApi(o,t),a=this.processApiPromise(s,e),n=this.getKey(o);this.pendingMap.set(n,a);try{return await a}finally{(0,r.runInAction)((()=>{this.pendingMap.delete(n)}))}}getPending(e){return this.pendingMap.get(this.getKey(this.getApiParams(e)))}getKey(e){return JSON.stringify(Object.entries(e).sort((([e],[t])=>e.localeCompare(t))))}constructor(){this.pendingMap=r.observable.map(),(0,r.makeObservable)(this,{isPending:r.observable,fetch:r.action})}}},372358:(e,t,i)=>{i.d(t,{VideoVideosFetchService:()=>h});var r=i(331635),o=i(327813),s=i(132028),a=i(882044),n=i(476205),d=i(349773),c=i(800227),u=i(734644),l=i(633084);class h extends l.VideoVideosAbstractFetchService{callApi(e,t){return this.videoApi.get(e,t)}async processApiPromise(e,t){const{count:i,groups:r,items:s,offset_from:a,profiles:c}=await e,{fields:u=[],extended:l}=t;return{count:i,items:(0,o.runInAction)((()=>{r&&this.groupsStoreFactory.ensureByFields(n.VideoGroupsStoreFactory.filterFields(u)).createManyFromApi(r),c&&this.usersStoreFactory.ensureByFields(d.VideoUsersStoreFactory.filterFields(u)).createManyFromApi(c);const{videosStoreFactory:e}=this;return(u.length>0?e.ensureByFields(u):e.ensure(l)).createManyFromApi(s)})),offsetFrom:a}}getApiParams(e){const t={additional_client_params:e.additionalClientParams,album_id:e.playlistId,count:e.count,device_id:e.deviceId,extended:(0,c.convertToBooleanParam)(Boolean(e.extended??e.fields)),fields:e.fields?.sort().join(","),for_user_id:e.forUserId,group_id:e.groupId,need_embed:(0,c.convertToBooleanParam)(e.needEmbed),need_privacy:(0,c.convertToBooleanParam)(e.needPrivacy),offset:e.offset,ok_client_params:e.okClientParams,ok_session_key:e.okSessionKey,owner_id:e.ownerId,sort_album:(0,c.convertToBooleanParam)(e.sortAlbum),track_code:e.trackCode,united_video_only:(0,c.convertToBooleanParam)(e.unitedVideoOnly),videos:e.videos?.sort().join(","),width:e.width,focus_on_video:e.focusOnVideo};return Object.fromEntries(Object.entries(t).filter((([,e])=>void 0!==e)))}constructor(e,t,i,r){super(),this.videoApi=e,this.groupsStoreFactory=t,this.usersStoreFactory=i,this.videosStoreFactory=r}}h=(0,r.__decorate)([s.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===a.VideoApi?Object:a.VideoApi,void 0===n.VideoGroupsStoreFactory?Object:n.VideoGroupsStoreFactory,void 0===d.VideoUsersStoreFactory?Object:d.VideoUsersStoreFactory,void 0===u.VideoVideosStoreFactory?Object:u.VideoVideosStoreFactory])],h)},739676:(e,t,i)=>{i.d(t,{VideoVideosStore:()=>a});var r=i(327813),o=i(457383),s=i(595059);class a{createManyFromApi(e){return e.reduce(((e,t)=>{const i=this.createOneFromApi(t);return i&&e.push(i),e}),[])}createOneFromApi(e){if(!(0,o.isVideoData)(e))return;const t="symbol"==typeof this.fieldsOrKey?this.videoOwnerStoreFactory.ensureByKey(this.fieldsOrKey):this.videoOwnerStoreFactory.ensureByFields(this.fieldsOrKey),i=new s.Video(e,this.favoriteService,this.videoLikesService,t);return this.videosMap.set(i.rawId,i),i}getById(e){return this.videosMap.get(e)}constructor(e,t,i,o){this.fieldsOrKey=e,this.videoOwnerStoreFactory=t,this.favoriteService=i,this.videoLikesService=o,this.videosMap=new Map,(0,r.makeAutoObservable)(this)}}},734644:(e,t,i)=>{i.d(t,{VideoVideosStoreFactory:()=>u});var r=i(331635),o=i(327813),s=i(132028),a=i(562587),n=i(739676),d=i(129021),c=i(969617);class u{ensure(e=!1){const t=u.getKey(e);return this.stores.get(t)??this.createByFields(t)}ensureByFields(e){const t=u.getKey(!0,e);return this.stores.get(t)??this.createByFields(t,e)}ensureByKey(e){return this.stores.get(e)??this.createByKey(e)}createByFields(e,t=[]){const i=new n.VideoVideosStore(t,this.videoOwnerStoreFactory,this.favoriteService,this.videoLikesService);return this.stores.set(e,i),i}createByKey(e){const t=new n.VideoVideosStore(e,this.videoOwnerStoreFactory,this.favoriteService,this.videoLikesService);return this.stores.set(e,t),t}static getKey(e,t=[]){return`${Number(e)}:${[...new Set(t)].sort().join(",")}`}constructor(e,t,i){this.videoOwnerStoreFactory=e,this.favoriteService=t,this.videoLikesService=i,this.stores=new Map,(0,o.makeAutoObservable)(this)}}u=(0,r.__decorate)([s.scope.container(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===a.VideoOwnerStoreFactory?Object:a.VideoOwnerStoreFactory,void 0===c.VideoFaveService?Object:c.VideoFaveService,void 0===d.VideoLikesService?Object:d.VideoLikesService])],u)},668965:(e,t,i)=>{i.d(t,{AnalyticsStats:()=>a});var r=i(331635),o=i(132028),s=i(71892);class a{getIntId(){return Math.floor(Math.random()*this.MAX_INT32)}getCurrentTime(){return(1e3*Date.now()).toString(10)}constructor(e){this.analytics=e,this.MAX_INT32=2147483647}}a=(0,r.__decorate)([o.scope.global(),(0,r.__metadata)("design:type",Function),(0,r.__metadata)("design:paramtypes",[void 0===s.Analytics?Object:s.Analytics])],a)},54490:(e,t,i)=>{i.d(t,{ProductionStats:()=>a});var r=i(331635),o=i(132028),s=i(668965);class a extends s.AnalyticsStats{getLastEvent(){return this.lastEvent}send(e,t){const i={...e,id:this.getIntId(),prev_id:this.getLastEvent()?.id,timestamp:this.getCurrentTime(),url:window.location.href};this.analytics.sendProductionStats(i,t),this.lastEvent=i}}a=(0,r.__decorate)([o.scope.global()],a)},526957:(e,t,i)=>{i.d(t,{MarketApi:()=>a});var r=i(331635),o=i(641569),s=i(132028);class a extends o.ApiNamespace{get namespace(){return"market"}constructor(...e){super(...e),this.addToCart=this.makeMethod("addToCart"),this.clearCart=this.makeMethod("clearCart"),this.get=this.makeMethod("get"),this.getAlbums=this.makeMethod("getAlbums"),this.getAlbumById=this.makeMethod("getAlbumById"),this.search=this.makeMethod("search"),this.addAlbum=this.makeMethod("addAlbum"),this.editAlbum=this.makeMethod("editAlbum"),this.addToAlbum=this.makeMethod("addToAlbum"),this.setAlbumItems=this.makeMethod("setAlbumItems"),this.getAbandonedCarts=this.makeMethod("getAbandonedCarts"),this.getAttendantItems=this.makeMethod("getAttendantItems"),this.getById=this.makeMethod("getById"),this.getButtons=this.makeMethod("getButtons"),this.getQuickMessages=this.makeMethod("getItemCardQuickMessages"),this.getItemCardWeb=this.makeMethod("getItemCardWeb"),this.getRecommendedItems=this.makeMethod("getRecommendedItems"),this.getItemsForAttach=this.makeMethod("getItemsForAttach"),this.getAdult18Plus=this.makeMethod("getAdult18Plus"),this.getCart=this.makeMethod("getCart"),this.getCartTotalQuantity=this.makeMethod("getCartTotalQuantity"),this.getCounters=this.makeMethod("getCounters"),this.getCommunityShopConditions=this.makeMethod("getCommunityShopConditions"),this.getEditUrl=this.makeMethod("getEditUrl"),this.getGroupActivityStatus=this.makeMethod("getGroupActivityStatus"),this.getItemReviews=this.makeMethod("getItemReviews"),this.getSettings=this.makeMethod("getSettings"),this.getServices=this.makeMethod("getServices"),this.delete=this.makeMethod("delete"),this.deleteAlbum=this.makeMethod("deleteAlbum"),this.deletePhoto=this.makeMethod("deletePhoto"),this.hideItem=this.makeMethod("hideItem"),this.removeFromCart=this.makeMethod("removeFromCart"),this.reorderAlbums=this.makeMethod("reorderAlbums"),this.setAsViewed=this.makeMethod("setAsViewed"),this.setDeliverySettings=this.makeMethod("setDeliverySettings"),this.setPaymentsSettings=this.makeMethod("setPaymentsSettings"),this.setSettings=this.makeMethod("setSettings"),this.setUserIsAdult=this.makeMethod("setUserIsAdult"),this.getSellerResponseTime=this.makeMethod("getSellerResponseTime"),this.getStorefront=this.makeMethod("getStorefront"),this.reorderItems=this.makeMethod("reorderItems"),this.createCommunityReview=this.makeMethod("createCommunityReview"),this.getCommunityReview=this.makeMethod("getCommunityReview"),this.getOrderById=this.makeMethod("getOrderById"),this.getOrders=this.makeMethod("getOrders"),this.getGroupOrders=this.makeMethod("getGroupOrders"),this.getOrderPaymentUrl=this.makeMethod("getOrderPaymentURL"),this.updateCommunityReview=this.makeMethod("updateCommunityReview"),this.getCommunityReviews=this.makeMethod("getCommunityReviews"),this.deleteCommunityReview=this.makeMethod("deleteCommunityReview"),this.restore=this.makeMethod("restore"),this.restoreCommunityReview=this.makeMethod("restoreCommunityReview"),this.getComments=this.makeMethod("getComments"),this.deleteComment=this.makeMethod("deleteComment"),this.restoreComment=this.makeMethod("restoreComment"),this.createComment=this.makeMethod("createComment"),this.editComment=this.makeMethod("editComment"),this.getCommunityReviewFriends=this.makeMethod("getCommunityReviewFriends"),this.getCommunityReviewComments=this.makeMethod("getCommunityReviewComments"),this.createCommunityReviewComment=this.makeMethod("createCommunityReviewComment"),this.deleteCommunityReviewComment=this.makeMethod("deleteCommunityReviewComment"),this.restoreCommunityReviewComment=this.makeMethod("restoreCommunityReviewComment"),this.editCommunityReviewComment=this.makeMethod("editCommunityReviewComment"),this.getCheckoutSettings=this.makeMethod("getCheckoutSettings"),this.setCheckoutSettings=this.makeMethod("setCheckoutSettings"),this.getCheckoutDeliveryPoints=this.makeMethod("getCheckoutDeliveryPoints"),this.createOrder=this.makeMethod("createOrder"),this.createCheckoutOrder=this.makeMethod("createCheckoutOrder"),this.getItemsForReview=this.makeMethod("getItemsForReview"),this.getCategories=this.makeMethod("getCategories"),this.createItemReview=this.makeMethod("createItemReview"),this.updateItemReview=this.makeMethod("updateItemReview"),this.getItemReview=this.makeMethod("getItemReview"),this.deleteItemReview=this.makeMethod("deleteItemReview"),this.restoreItemReview=this.makeMethod("restoreItemReview"),this.getItemReviewComments=this.makeMethod("getItemReviewComments"),this.deleteItemReviewComment=this.makeMethod("deleteItemReviewComment"),this.restoreItemReviewComment=this.makeMethod("restoreItemReviewComment"),this.createItemReviewComment=this.makeMethod("createItemReviewComment"),this.getItemsByVideo=this.makeMethod("getItemsByVideo"),this.getCommunityReviewCreateConfig=this.makeMethod("getCommunityReviewCreateConfig"),this.getItemReviewCreateConfig=this.makeMethod("getItemReviewCreateConfig")}}a=(0,r.__decorate)([s.scope.global()],a)},363046:(e,t,i)=>{function r(e){e.preventDefault(),e.stopPropagation()}i.d(t,{cancelEvent:()=>r})},884921:(e,t,i)=>{function r(){return("undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).vk?.__domain||"vk.com"}i.d(t,{VK_URL_REGEX:()=>d,getHostName:()=>r});const o=e=>e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"),s=(o(r()),["vk.com","vk.ru",r()].filter(((e,t,i)=>i.indexOf(e)===t)).concat(["vkontakte.ru","vk.me","userapi.com"])),a=new RegExp("("+s.map(o).join("|")+")"),n=new RegExp(`([a-zA-Z0-9\\.\\_\\-]+\\.)?${a.source}`),d=new RegExp(`^(https?:\\/\\/)?${n.source}($|\\/(.*))`)},454404:(e,t,i)=>{i.d(t,{LazyStickerRich:()=>d});var r=i(474848),o=i(296540),s=i(220208),a=i(8520);const n=(0,o.lazy)((()=>(0,a.asyncImportLoader)((async()=>{const{StickerRich:e}=await Promise.all([i.e(89631),i.e(41162),i.e(50756),i.e("langs/web/sticker")]).then(i.bind(i,838670));return{default:e}}))));function d(e){const{size:t}=e.baseStickerProps;return(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)("div",{style:{width:t,height:t},children:(0,r.jsx)(s.Spinner,{})}),children:(0,r.jsx)(n,{...e})})}},344527:(e,t,i)=>{i.d(t,{isBaseSticker:()=>r,isPopupSticker:()=>o});const r=e=>Boolean(e&&"inner_type"in e&&"base_sticker_new"===e.inner_type),o=e=>r(e)&&Boolean(e.popup?.layers)},808586:(e,t,i)=>{i.d(t,{PopupContext:()=>o,usePopupSticker:()=>a,usePopupStickerWithError:()=>s});var r=i(296540);const o=(0,r.createContext)(null);function s(){const e=(0,r.useContext)(o);if(null===e)throw new Error("You have forgotten to wrap your root component with PopupProvider");return e}function a(){const e=(0,r.useContext)(o);return null===e?{popupStore:void 0}:e}},761894:(e,t,i)=>{i.d(t,{ANIMATION_DEDUCTIBLE_DATA_PROPERTY:()=>_,CONTAINER_ID_DATASET_PROPERTY:()=>d,CONTAINER_ID_DATA_DEFAULT_VALUE:()=>s,CONTAINER_ID_DATA_PROPERTY:()=>n,ConflictActionsTypes:()=>T,CustomPopUpLayerTypes:()=>S,DEDUCTIBLE_DATA_PROPERTY:()=>l,DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY:()=>h,DEFAULT_LOOP_LIMIT:()=>I,DEFAULT_PLAYER_OPTIONS:()=>y,DEFAULT_POPUP_CONTAINER_DATA_PROPERTY:()=>m,DEFAULT_POSITION_X:()=>w,DEFAULT_POSITION_Y:()=>C,DEFAULT_SCALE_RATIO:()=>E,DESTROY_ANIMATION_DURATION:()=>R,FULL_SCREEN_CONTAINER_DATA_PROPERTY:()=>u,FULL_SCREEN_DATA_DEFAULT_VALUE:()=>a,MIN_SIZE_FOR_PLAY:()=>O,MIN_SIZE_FOR_SCALE:()=>P,POPUP_LOTTIE_GROUP:()=>b,POPUP_POSITION_DEFAULT_VALUE:()=>g,POPUP_POSITION_PROPERTY:()=>p,POPUP_STICKER_IM_CONTAINER:()=>c,PopUpLayerTypes:()=>k,PopUpPositionTypes:()=>A,SCREEN_MODIFICATOR:()=>v,SPEED_ON_DESTROY:()=>f});var r=i(157951),o=i(351089);const s="common_container",a="body",n="data-popup-sticker-container-id",d=(0,o.dataAttrKeyToDatasetKey)(n),c="popup-sticker-im-container",u="data-popup-sticker-full-screen-container",l="data-popup-sticker-deductible",h="data-popup-sticker-deductible-full-screen",_="data-popup-sticker-animation-deductible",m="data-popup-sticker-use-common",p="data-popup-sticker-position",g="fixed",v="screen",y={speed:1,loop:!0,autoplay:!1,cache:!1,lazyLoading:!0,direction:r.LottiePlayerDirection.FORWARD,strictCache:!0},f=3,k={Gradient:"gradient",FullScreen:"animation_fullscreen",Fixed:"animation_fixed"},S={Background:"background"},A={FullScreen:"fullscreen",Fixed:"fixed",TopFullScreen:"topFullScreen"},I=1,E=1,w="center",C="middle",P=384,O=64,b="Popup",T={ChangeModificator:"changeModificator",DontShow:"dontShow"},R=300},693217:(e,t,i)=>{i.d(t,{findFixedElement:()=>n,getDataAttrs:()=>o,getDeductibleDataAttrs:()=>a,getPopupElementsFromFixedElement:()=>c,getStringDataAttrs:()=>s});var r=i(761894);const o=e=>{const{popupStickerUseCommon:t="false",popupStickerContainerId:i,popupStickerFullScreenContainer:o,popupStickerPosition:s=r.POPUP_POSITION_DEFAULT_VALUE}=e,a={[r.DEFAULT_POPUP_CONTAINER_DATA_PROPERTY]:t,[r.POPUP_POSITION_PROPERTY]:s,[r.CONTAINER_ID_DATA_PROPERTY]:i};return o&&(a[r.FULL_SCREEN_CONTAINER_DATA_PROPERTY]=o),a},s=e=>{let t="";const i=o(e);return Object.entries(i).forEach((([e,i])=>{t+=`${e}='${i}' `})),t.trim()},a=e=>{const{popupStickerDeductible:t,popupStickerDeductibleFullScreen:i}=e,o={};return t&&(o[r.DEDUCTIBLE_DATA_PROPERTY]=t),i&&(o[r.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY]=i),o},n=e=>e.closest(`[${r.CONTAINER_ID_DATA_PROPERTY}]`)||document.body;function d(e,t,i,o,s,a=null){let n=[...document.querySelectorAll(`[${t}=${o}]`)];switch(s&&(n=[...n,...document.querySelectorAll(`[${t}=${r.CONTAINER_ID_DATA_DEFAULT_VALUE}]`)]),n.push(i),e){case"lower":case"parent":n=n.sort(((e,t)=>e.getBoundingClientRect().top-t.getBoundingClientRect().top));break;case"upper":n=n.sort(((e,t)=>e.getBoundingClientRect().bottom-t.getBoundingClientRect().bottom))}const d=n.findIndex((e=>e===i));let c;switch(e){case"upper":case"parent":c=n[d-1]||null;break;case"lower":c=n[d+1]||null;break;default:c=n[0]||null}return c||a}const c=(e,t)=>{const{popupStickerContainerId:i,popupStickerPosition:o,popupStickerUseCommon:s}=(e=>{const{popupStickerUseCommon:t="false",popupStickerPosition:i=r.POPUP_POSITION_DEFAULT_VALUE,popupStickerContainerId:o=r.CONTAINER_ID_DATA_DEFAULT_VALUE}=e.dataset;return{popupStickerContainerId:o,popupStickerUseCommon:t,popupStickerPosition:i}})(e);let a="true"===s;return{fixedElement:e,headerElement:d("upper",r.DEDUCTIBLE_DATA_PROPERTY,t,i,a),footerElement:d("lower",r.DEDUCTIBLE_DATA_PROPERTY,t,i,a),fullScreenElement:d("parent",r.FULL_SCREEN_CONTAINER_DATA_PROPERTY,t,i,a,document.body),fullScreenHeaderElement:d("upper",r.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,i,a),fullScreenFooterElement:d("lower",r.DEDUCTIBLE_FULL_SCREEN_DATA_PROPERTY,t,i,a),animationFooterElement:d("lower",r.ANIMATION_DEDUCTIBLE_DATA_PROPERTY,t,i,a),position:o}}},351089:(e,t,i)=>{i.d(t,{dataAttrKeyToDatasetKey:()=>r});const r=e=>e.slice(5).split("-").map(((e,t)=>0!==t?e.charAt(0).toUpperCase()+e.slice(1):e)).join("")},650416:(e,t,i)=>{i.d(t,{setRef:()=>r});const r=(e,t)=>{t&&("function"==typeof t?t(e):t.hasOwnProperty("current")&&(t.current=e))}},104386:(e,t,i)=>{i.d(t,{getValidateLengthMessage:()=>r});const r=({value:e,maxLength:t,diffForRemainder:i=100,getExceededLengthLabel:r,getRemainingLengthLabel:o})=>{const s=e.trim().length||0,a=s>t-i,n=s>t,d=Math.abs(s-t),c=t-s;return n?r(d):a?o(c):null}},449522:(e,t,i)=>{i.d(t,{Icon20SmileOutline:()=>s});var r=i(474848),o=(i(296540),i(506447));const s=e=>(0,r.jsx)(o.SvgIconRootV2,{viewBox:"0 0 20 20",width:20,height:20,vkuiIconId:"smile_outline_20",vkuiAttrs:{fill:"currentColor"},vkuiProps:e,children:(0,r.jsx)("path",{d:"M10 1.5a8.5 8.5 0 1 1 0 17 8.5 8.5 0 0 1 0-17M10 3a7 7 0 1 0 0 14 7 7 0 0 0 0-14m3.067 9.056c.3.286.312.76.027 1.06a4 4 0 0 1-.855.654A4.36 4.36 0 0 1 10 14.4a4.36 4.36 0 0 1-2.239-.63 4 4 0 0 1-.854-.653.75.75 0 0 1 1.004-1.109l.197.18c.098.083.239.186.417.292.446.263.942.42 1.475.42s1.029-.157 1.475-.42c.178-.106.32-.21.417-.292l.115-.105a.75.75 0 0 1 1.06-.027M7.625 7.25a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25m4.75 0a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25"})})}}])}if("undefined"!=typeof window&&window.partConfigEnabled?.("static_loading_execute_errors"))try{e(),window.stManager?.done?.("dist/web/chunks/ad2e89f7.5f666402.js")}catch(e){throw window.stManager?.fail?.("dist/web/chunks/ad2e89f7.5f666402.js",e),e}else e(),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/ad2e89f7.5f666402.js");