function e(){"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[45233],{230337:(e,t,i)=>{function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="add_outline_24__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="add_outline_24__add_outline_24"><path d="M0 0h24v24H0z"/><path d="M12 3c.5 0 .9.4.9.9v7.2h7.2a.9.9 0 1 1 0 1.8h-7.2v7.2a.9.9 0 1 1-1.8 0v-7.2H3.9a.9.9 0 1 1 0-1.8h7.2V3.9c0-.5.4-.9.9-.9Z" id="add_outline_24__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"add_outline_24"}}i.d(t,{getIcon24AddOutline:()=>n})},101594:(e,t,i)=>{function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Zm.3-14a.9.9 0 0 0-1.8 0v4.77a.9.9 0 0 0 .42.77l3.7 2.32a.9.9 0 0 0 .96-1.52l-3.28-2.06V8Z" clip-rule="evenodd"/></svg>',name:"clock_24"}}i.d(t,{getIcon24Clock:()=>n})},573046:(e,t,i)=>{function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M20.74 5.66a.9.9 0 0 1 0 1.28l-11.1 11.1a.9.9 0 0 1-1.28 0l-5.1-5.1a.9.9 0 0 1 1.28-1.28L9 16.13 19.46 5.66a.9.9 0 0 1 1.28 0Z" clip-rule="evenodd"/></svg>',name:"done_outline_24"}}i.d(t,{getIcon24DoneOutline:()=>n})},863404:(e,t,i)=>{function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 3.61c1.41-2.54 4.08-2.85 5.6-1.33 1.24 1.25 1.26 3.26-.15 4.72H18a4 4 0 0 1 4 4v.43a4 4 0 0 1-.4 2.04A2.74 2.74 0 0 1 20 14.8v2.07c0 1.78-.19 2.43-.53 3.08a3.63 3.63 0 0 1-1.52 1.52c-.65.34-1.3.53-3.08.53H9.13c-1.79 0-2.43-.19-3.08-.53a3.63 3.63 0 0 1-1.52-1.52C4.2 19.3 4 18.65 4 16.87V14.8a2.74 2.74 0 0 1-1.6-1.34 3.72 3.72 0 0 1-.4-1.79V11a4 4 0 0 1 4-4h.55C5.14 5.54 5.16 3.53 6.4 2.28 7.93.76 10.6 1.07 12 3.61ZM11.1 15H5.8v2.12c.01.67 0 1.38.32 1.98.55 1.03 1.73 1.09 2.76 1.1h2.22V15Zm7.1 0h-5.3v5.2h2.22c1.03-.02 2.2-.07 2.76-1.1.22-.41.3-.82.32-1.99V15ZM18 8.8h-5.1v4.4h5.62c.55 0 1.2-.04 1.5-.58.1-.22.17-.47.18-1V11A2.2 2.2 0 0 0 18 8.8Zm-12 0A2.2 2.2 0 0 0 3.8 11v.62c.01.53.07.78.19 1 .29.54.94.58 1.48.58h5.63V8.8H6Zm1.68-5.24C6.6 4.62 7.6 6.63 10.85 6.97l.25.03c-.26-3.46-2.23-4.64-3.42-3.44Zm8.65 0c-1.2-1.2-3.17-.02-3.43 3.44l.26-.02c3.25-.35 4.24-2.35 3.17-3.42Z"/></svg>',name:"gift_outline_24"}}i.d(t,{getIcon24GiftOutline:()=>n})},994781:(e,t,i)=>{function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12.11 5.7A5.94 5.94 0 0 1 16 4h.28A5.73 5.73 0 0 1 22 9.72c0 2.96-1.03 4.42-5.57 8.06l-.94.74-2.36 1.84a1.84 1.84 0 0 1-2.26 0l-2.69-2.1C3.13 14.26 2 12.8 2 9.72A5.73 5.73 0 0 1 7.73 4c1.54 0 2.93.58 4.14 1.7l.12.11.12-.11Z"/></svg>',name:"like_24"}}i.d(t,{getIcon24Like:()=>n})},938307:(e,t,i)=>{function n(){return{icon:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M16 4a5.95 5.95 0 0 0-3.89 1.7l-.12.11-.12-.11A5.96 5.96 0 0 0 7.73 4 5.73 5.73 0 0 0 2 9.72c0 3.08 1.13 4.55 6.18 8.54l2.69 2.1c.66.52 1.6.52 2.26 0l2.36-1.84.94-.74c4.53-3.64 5.57-5.1 5.57-8.06A5.73 5.73 0 0 0 16.27 4zm.27 1.8a3.93 3.93 0 0 1 3.93 3.92v.3c-.08 2.15-1.07 3.33-5.51 6.84l-2.67 2.08a.04.04 0 0 1-.04 0L9.6 17.1l-.87-.7C4.6 13.1 3.8 11.98 3.8 9.73A3.93 3.93 0 0 1 7.73 5.8c1.34 0 2.51.62 3.57 1.92a.9.9 0 0 0 1.4-.01c1.04-1.3 2.2-1.91 3.57-1.91z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"like_outline_24"}}i.d(t,{getIcon24LikeOutline:()=>n})},876838:(e,t,i)=>{function n(){return{icon:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M21 16.1a.9.9 0 0 1 .9.79v.54c0 1.08-.15 1.79-.5 2.46a3.63 3.63 0 0 1-1.51 1.5 4.6 4.6 0 0 1-2.17.5l-.3.01H17a.9.9 0 0 1-.11-1.8h.54c.8 0 1.22-.09 1.61-.3.33-.17.59-.43.77-.76.18-.35.27-.73.29-1.4V17c0-.5.4-.9.9-.9zm-18 0a.9.9 0 0 1 .9.79v.54c0 .8.09 1.22.3 1.61.17.33.43.59.76.77.35.18.73.27 1.4.29H7a.9.9 0 0 1 .11 1.8h-.54a4.87 4.87 0 0 1-2.46-.5 3.63 3.63 0 0 1-1.5-1.51 4.6 4.6 0 0 1-.5-2.17l-.01-.3V17c0-.5.4-.9.9-.9zm14-2.7a.9.9 0 0 1 .9.79v.49c0 .7-.11 1.24-.37 1.72s-.65.87-1.13 1.13c-.42.22-.88.34-1.46.36l-.26.01H9.32c-.7 0-1.24-.11-1.72-.37a2.72 2.72 0 0 1-1.13-1.13 3.27 3.27 0 0 1-.36-1.46l-.01-.26v-.38a.9.9 0 0 1 1.8-.11v.49c0 .43.05.67.16.87.1.17.22.3.39.39.17.1.37.14.7.16h5.53c.43 0 .67-.05.87-.16.17-.1.3-.22.39-.39.1-.17.14-.37.16-.7v-.55c0-.5.4-.9.9-.9zM7 11.91a.9.9 0 0 1-.15 0L3.9 11.9a.9.9 0 1 1 0-1.8h2.2v-.54c0-.94.1-1.44.37-1.96.26-.48.65-.87 1.13-1.13a3.5 3.5 0 0 1 1.74-.37h5.1c.94 0 1.44.1 1.96.37.48.26.87.65 1.13 1.13.25.47.35.93.37 1.74v.76h2.2a.9.9 0 1 1 0 1.8H7.15a.9.9 0 0 1-.15.01zm7.44-4.01H9.56c-.67 0-.89.04-1.11.16a.92.92 0 0 0-.39.39c-.1.18-.14.35-.16.77V10.1h8.2V9.24c-.02-.43-.06-.61-.16-.8a.92.92 0 0 0-.39-.38c-.18-.1-.35-.14-.77-.16zM7 2.1a.9.9 0 0 1 .11 1.8h-.54c-.8 0-1.22.09-1.61.3-.33.17-.59.43-.77.76-.18.35-.27.73-.29 1.4V7a.9.9 0 0 1-1.8.11v-.54c0-1.08.15-1.79.5-2.46.35-.65.86-1.16 1.51-1.5a4.6 4.6 0 0 1 2.17-.5l.29-.01zm10.43 0c1.08 0 1.79.15 2.46.5.65.35 1.16.86 1.5 1.51.33.61.48 1.25.5 2.17l.01.3V7a.9.9 0 0 1-1.8.11v-.54c0-.8-.09-1.22-.3-1.61a1.83 1.83 0 0 0-.76-.77 2.89 2.89 0 0 0-1.4-.29H17a.9.9 0 0 1-.11-1.8H17z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"scan_viewfinder_outline_24"}}i.d(t,{getIcon24ScanViewfinderOutline:()=>n})},453829:(e,t,i)=>{function n(){return{icon:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M12 3.73c-1.12.07-2 1-2 2.14v2.12h-.02a9.9 9.9 0 0 0-7.83 10.72.9.9 0 0 0 1.61.46l.19-.24a9.08 9.08 0 0 1 5.84-3.26l.2-.03.01 2.5a2.15 2.15 0 0 0 3.48 1.69l7.82-6.14a2.15 2.15 0 0 0 0-3.38l-7.82-6.13c-.38-.3-.85-.46-1.33-.46zm.15 1.79c.08 0 .15.03.22.07l7.82 6.14a.35.35 0 0 1 0 .55l-7.82 6.13a.35.35 0 0 1-.57-.28V14.7a.9.9 0 0 0-.92-.9h-.23l-.34.02c-2.28.14-4.4.98-6.12 2.36l-.17.15.02-.14a8.1 8.1 0 0 1 6.97-6.53.9.9 0 0 0 .79-.9V5.87c0-.2.16-.35.35-.35z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"share_outline_24"}}i.d(t,{getIcon24ShareOutline:()=>n})},564324:(e,t,i)=>{i.d(t,{screenfull:()=>s});const n=()=>/ipad|iphone|ipod/.test(window.navigator.userAgent.toLowerCase()),s=function(){const e=function(){let e,t;const i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];let s=0,o=i.length;const r={};for(;s<o;s++)if(e=i[s],e&&e[1]in document){for(s=0,t=e.length;s<t;s++)r[i[0][s]]=e[s];return r}return!!n()&&i[0].reduce(((e,t)=>({...e,[t]:t})),{})}(),t={element:document[e.fullscreenElement],request:function(t){if(n()){const e=t.querySelector("video");return void(e?.webkitEnterFullscreen&&(this.element=t,e.webkitEnterFullscreen()))}const i=e.requestFullscreen;t=t||document.documentElement,this.element=t,t[i]()},exit:function(t){if(t&&n()){const e=t.querySelector("video");e?.webkitExitFullscreen&&e.webkitExitFullscreen()}else document[e.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:e};return!!e&&(Object.defineProperties(t,{isFullscreen:{get:function(){if(n()){const e=this.element?.querySelector("video");if(e)return e.webkitDisplayingFullscreen}return Boolean(document[e.fullscreenElement])}},enabled:{enumerable:!0,get:function(){return!!n()||Boolean(document[e.fullscreenEnabled])}}}),t)}()},712714:(e,t,i)=>{i.d(t,{END_LARGE:()=>o,END_SMALL:()=>s,INLINE:()=>n});const n=1,s=2,o=3},461388:(e,t,i)=>{i.r(t),i.d(t,{API_LIVE_PHASES:()=>l,ENDED:()=>o,FAILED:()=>r,PRE_CHECK:()=>d,STARTED:()=>s,UPCOMING:()=>a,WAITING:()=>n});const n=1,s=2,o=3,r=4,a=5,d=6,l={waiting:n,started:s,postlive:o,finished:o,failed:r,upcoming:a}},604958:(e,t,i)=>{i.d(t,{default:()=>s});var n=i(553608);const s={set(e,t){n.bestAvailableStorage.setItem(e,JSON.stringify(t))},get:e=>JSON.parse(n.bestAvailableStorage.getItem(e)),getByPrefix(e){const t={},i=n.bestAvailableStorage.length();for(let s=0;s<i;s++){const i=n.bestAvailableStorage.key(s);0===i.indexOf(e)&&(t[i]=this.get(i))}return t},remove(e){n.bestAvailableStorage.removeItem(e)},savePref(e,t){const i=this.getPref("*");let n=i;const s=e.split(".");for(;;){const e=s.shift();if(!s.length){n[e]=t;break}null==n[e]&&(n[e]={}),n=n[e]}this.set("videoplayer_prefs",i)},deletePref(e){this.savePref(e,void 0)},getPref(e="*"){const t=this.get("videoplayer_prefs")||{};if("*"===e)return t;let i=t;const n=e.split(".");for(;;){if(i=i[n.shift()],!n.length||!i)break}return i}}},403788:(e,t,i)=>{i.d(t,{TimeoutStore:()=>n});class n{constructor(){this._active=new Set,this.setTimeout=(e,t=0,...i)=>{const n=this._active,s=window.setTimeout((()=>{e.apply(null,i),n.delete(s)}),t);return n.add(s),s},this.clearTimeout=e=>{const t=this._active;window.clearTimeout(e),t.delete(e)},this.clearAll=()=>{const e=this._active;e.forEach((e=>window.clearTimeout(e))),e.clear()}}}},795168:(e,t,i)=>{i.d(t,{Tooltip:()=>r});var n=i(898848),s=i(754866);const o=10;class r{show({el:e,text:t,toDown:i=!1,offsetXpercent:r=.5,offsetY:a=9,offsetX:d=0}){if(!(t=(0,n.isFunction)(t)?t():t))return;(0,s.show)(this.root),(0,s.val)(this._text,t);const l=this.container.getBoundingClientRect(),h=e.getBoundingClientRect(),c=this.root.getBoundingClientRect();let u,g=h.left-l.left+Math.round(h.width*r)+d-Math.round(c.width/2),p=(i?h.bottom:h.top)-l.top-(i?0:c.height)+a*(i?1:-1);g<o?(u=g-o-5,g=o):g+c.width>l.width-o&&(u=g+c.width-(l.width-o)-5,g=l.width-c.width-o),(0,s.setStyle)(this.root,{left:g+"px",top:p+"px"}),(0,s.setStyle)(this._arrow,{marginLeft:u?u+"px":null}),(0,s.toggleClass)(this._arrow,"_arrow_up",i),this.undelay(this._hideDelayedTimeout),this.undelay(this._hideTimeout),this._hideTimeout=this.delay(this.hide,3e3),this._shown=!0}hide(){this._shown&&(this._shown=!1,(0,s.hide)(this.root),this.lastShown=Date.now())}hideWithDelay(e=0){this._shown&&(this._hideDelayedTimeout=this.delay(this.hide,e))}isVisible(){return this._shown}delay(e,t,...i){const n=setTimeout((()=>{e.apply(this,i)}),t);return this._componentTimeouts.push(n),n}undelay(e){if(!e)return;clearTimeout(e);const t=this._componentTimeouts.indexOf(e);t>=0&&this._componentTimeouts.splice(t,1)}constructor(e){this.container=e,this._componentTimeouts=[],this.root=(0,s.se)('\n<div class="videoplayer_tooltip">\n  <div class="_text"></div>\n  <div class="_arrow"></div>\n</div>\n    '),this._styles=document.createElement("style"),this._styles.innerText="\n  .videoplayer_tooltip {\n    --tooltip-arrow-size: 5px;\n    display: none;\n    position: absolute;\n    z-index: 100;\n    background: var(--black_alpha88);\n    border-radius: 4px;\n    padding: 4.5px 9px;\n    pointer-events: none;\n    font-size: 12.5px;\n    line-height: 15px;\n  }\n\n  .videoplayer_ui._fullscreen .videoplayer_tooltip {\n    font-size: 16px;\n    line-height: 22px;\n  }\n\n  .videoplayer_tooltip ._text {\n    color: var(--white);\n    white-space: nowrap;\n  }\n\n  .videoplayer_tooltip ._arrow {\n    position: absolute;\n    left: 50%;\n    top: 100%;\n    border-top: var(--tooltip-arrow-size) solid var(--black_alpha88);\n    border-left: var(--tooltip-arrow-size) solid transparent;\n    border-right: var(--tooltip-arrow-size) solid transparent;\n    margin-left: calc(-1 * var(--tooltip-arrow-size));\n  }\n\n  .videoplayer_tooltip ._arrow_up {\n    top: calc(-1 * var(--tooltip-arrow-size));\n    border-top: 0;\n    border-bottom: var(--tooltip-arrow-size) solid var(--black_alpha88);\n  }\n",this._text=(0,s.domByClass)(this.root,"_text"),this._arrow=(0,s.domByClass)(this.root,"_arrow"),this._shown=!1,this.el=document.createDocumentFragment(),this.el.append(this._styles),this.el.append(this.root)}}},618144:(e,t,i)=>{i.d(t,{fetchVideoLiveStatus:()=>o});var n=i(957994),s=i(538522);const o=(e,t,i)=>(0,n.api)("video.getLiveStatus",{video_ids:(0,s.joinRawId)({ownerId:e,itemId:t,externalId:i})})},123158:(e,t,i)=>{i.d(t,{onLogoClick:()=>o});var n=i(841315),s=i(575753);const o=(e,t={},i="")=>{let o=(0,n.getVideoCopyLink)(e,t.position,t.isEmbed,t.refDomain,t.host);s.browser.mobile&&i&&(o=i),window.open(o,"_blank")}},477808:(e,t,i)=>{i.d(t,{PlayerLive:()=>l});var n=i(957994),s=i(317929),o=i(618144),r=i(1100),a=i(897976),d=i(859738);class l{init({status:e,startTime:t,ownerId:i,videoId:n,accessKey:s,refDomain:o,callbacks:r}){this.ownerId=parseInt(i,10),this.videoId=parseInt(n,10),this.accessKey=s,this.refDomain=o,this.startTime=t,this.callbacks=r,this.isUpcoming(e)||this.isWaiting(e)?this.checkStarted():this.isStarted(e)&&(this.checkFinished(),this.startLiveHeartbeat())}destroy(){window.clearTimeout(this.timeoutIdStart),window.clearTimeout(this.timeoutIdFinish),this.stopLiveHeartbeat()}isUpcoming(e){return"upcoming"===e}isWaiting(e){return"waiting"===e}isStarted(e){return"started"===e}isFinished(e){return"finished"===e}isPostLive(e){return"postlive"===e}async asyncWrapper(e,...t){let i;try{i=await e(...t)}catch(e){(0,d.trackOneStatError)(e)}return i}async checkStarted(){const e=await this.asyncWrapper(o.fetchVideoLiveStatus,this.ownerId,this.videoId,this.accessKey),t=e?.[0]?.live_status;if(this.isStarted(t)){const e=await(0,r.fetchVideo)(this.ownerId,this.videoId,this.accessKey),t=(0,a.constructVideoData)(e.items[0]||{});if(t.sources&&Object.keys(t.sources).length>0)return this.callbacks?.onLiveStart?.(t),this.checkFinished(),void this.startLiveHeartbeat()}else this.isWaiting(t)&&this.callbacks?.onLiveWaitingRecover?.();const i=this.startTime?15e3:3e3;this.timeoutIdStart=window.setTimeout((()=>this.checkStarted()),i)}async checkFinished(){const e=await this.asyncWrapper(o.fetchVideoLiveStatus,this.ownerId,this.videoId,this.accessKey),t=e?.[0]?.live_status;if(this.isWaiting(t))return this.callbacks?.onLiveWaitingRecover?.(),this.stopLiveHeartbeat(),void this.checkStarted();if(this.isFinished(t)||this.isPostLive(t)){this.stopLiveHeartbeat();const e=await(0,r.fetchVideo)(this.ownerId,this.videoId,this.accessKey),t=(0,a.constructVideoData)(e.items[0]||{});if(t.sources&&Object.keys(t.sources).length>0&&(t.sources[s.VideoFormat.DASH_ONDEMAND]||t.sources[s.VideoFormat.HLS_ONDEMAND]))return void this.callbacks?.onLiveEnd?.(t);this.callbacks?.onLiveWaitingRecord?.()}this.timeoutIdFinish=window.setTimeout((()=>this.checkFinished()),6e3)}async startLiveHeartbeat(){await this.asyncWrapper(n.api,"video.liveHeartbeat",{owner_id:this.ownerId,video_id:this.videoId,access_key:this.accessKey,ref_domain:this.refDomain});this.timeoutIdLiveHeartBeat=window.setTimeout((()=>this.startLiveHeartbeat()),5e3)}async stopLiveHeartbeat(){this.isSentLiveStopHeartBeat||(window.clearTimeout(this.timeoutIdLiveHeartBeat),this.isSentLiveStopHeartBeat=!0,await this.asyncWrapper(n.api,"video.liveStopHeartbeat",{owner_id:this.ownerId,video_id:this.videoId}))}}},611563:(e,t,i)=>{i.d(t,{BugReportControl:()=>d});var n=i(474848),s=i(296540),o=i(271036),r=i(864028),a=i(658563);const d=({onOpen:e,getLang:t,getStatProps:i})=>{const[d,l]=(0,s.useState)(!1),h=(0,s.useCallback)((()=>{e?.(),l(!0)}),[e]),c=(0,s.useCallback)((()=>{l(!1)}),[]);return(0,n.jsxs)(n.Fragment,{children:[d&&(0,n.jsx)(a.BugReportModal,{onClose:c,getStatProps:i,getLang:t}),(0,n.jsx)(o.IconButton,{"aria-label":t("bugreport_aria_label"),noPadding:!0,onClick:h,children:(0,n.jsx)(r.Icon24BugOutline,{})})]})}},658563:(e,t,i)=>{i.d(t,{BugReportModal:()=>m});var n=i(474848),s=i(296540),o=i(703844),r=i(694244),a=i(782174),d=i(63614),l=i(524378),h=i(44544),c=i(945206),u=i(908242),g=i(454154),p=i(211413),v=i(596181),y=i(976903);const m=({onClose:e,getLang:t,getStatProps:i})=>{const[m]=(0,s.useState)((()=>new v.DevNullStatCollector(new v.CustomStatCollector))),[_,w]=(0,s.useState)(""),S=_.trim().length,M=S>0&&S<=1024,E=(0,s.useCallback)((e=>{w(e.target.value)}),[]),C=(0,s.useCallback)((()=>{w(""),e()}),[]),I=()=>{if(!M)return;const e=_.trim();m.logEvent((0,y.createDevNullEvent)(e,i())),window.Notifier.showEvent({title:t("bugreport_toast_title"),text:t("bugreport_toast_text")}),C()};return(0,n.jsx)(p.MessageBoxModal,{width:450,onDestroy:C,children:({onClose:e})=>(0,n.jsx)(o.FocusTrap,{hasFirstFocusableElement:!0,children:(0,n.jsxs)(r.ModalBox,{"aria-label":t("bugreport_header"),children:[(0,n.jsx)(a.ModalHeader,{onClose:e,closeAriaLabel:t("bugreport_close"),children:t("bugreport_header")}),(0,n.jsx)(d.ModalBody,{insetLevel:1,children:(0,n.jsx)(l.FormLayout,{onSubmit:I,children:(0,n.jsx)(h.FormItem,{children:(0,n.jsx)(c.Textarea,{"data-focus-first":!0,maxHeight:180,maxLength:1024,placeholder:t("bugreport_placeholder"),value:_,onChange:E})})})}),(0,n.jsx)(u.ModalFooter,{actions:[(0,n.jsx)(g.Button,{"aria-label":t("bugreport_cancel"),mode:"tertiary",onClick:e,children:t("bugreport_cancel")},"cancel"),(0,n.jsx)(g.Button,{"aria-label":t("bugreport_send"),disabled:!M,mode:"primary",onClick:I,children:t("bugreport_send")},"send")]})]})})})}},976903:(e,t,i)=>{i.d(t,{createDevNullEvent:()=>n});const n=(e,{debugData:t,ownerId:i,videoId:n,vsid:s})=>({key:"video_tech_bugreport",value:n,value2:i,value_str:e,value_str2:s??"",value_str3:t?t.slice(0,1024):""})},837606:(e,t,i)=>{i.d(t,{BugReportControl:()=>n.BugReportControl,BugReportModal:()=>s.BugReportModal});var n=i(611563),s=i(658563)},870257:(e,t,i)=>{i.r(t),i.d(t,{renderControlPreviewCard:()=>d});var n=i(474848),s=i(649360),o=i(205338),r=i(369370),a=i(856289);const d=(e,t)=>{const i=(0,o.createRoot)(e),d={...(0,r.mapVideoFullToVideoCardItem)(t.video),thumbSrc:(0,a.getThumbSrcFromImages)(t.video.thumb),owner:t.video.owner};"blurred"===d.restriction?.mode&&(d.restriction.title=void 0);const l={...t,video:d};i.render((0,n.jsx)(s.MiniVideoCard,{...l}))}},149785:(e,t,i)=>{i.r(t),i.d(t,{renderVideoPlayerEndScreen:()=>h});var n=i(474848),s=i(865708),o=i(220208),r=i(205338),a=i(540462),d=i(319756),l=i(915795);const h=(e,t)=>{const i=document.createElement("div");e.appendChild(i);const h=(0,r.createRoot)(e);return(0,a.partConfigEnabled)("video_endscreen_button_close_bugfix")?h.render((0,n.jsx)(s.AppRootProvider,{platform:o.Platform.VKCOM,children:(0,n.jsx)(d.DIRootWebProvider,{children:(0,n.jsx)(l.EndScreen,{...t})})})):h.render((0,n.jsx)(l.EndScreen,{...t})),()=>{h.unmount(),i.remove()}}},195942:(e,t,i)=>{i.d(t,{HotKeyModal:()=>g});var n=i(474848),s=i(703844),o=i(694244),r=i(782174),a=i(299494),d=i(63614),l=i(908242),h=i(454154),c=i(211413),u=i(616238);const g=({onClose:e,hotKeyMapData:t})=>{const{groups:i,title:g,closeBtnText:p}=t;return(0,n.jsx)(c.MessageBoxModal,{width:680,onDestroy:e,children:({onClose:e})=>(0,n.jsx)(s.FocusTrap,{autoFocus:!0,children:(0,n.jsxs)(o.ModalBox,{"aria-label":g,children:[(0,n.jsx)(r.ModalHeader,{onClose:e,closeAriaLabel:p,children:g}),(0,n.jsx)(a.ModalScrollView,{autoHideScrollbar:!0,height:"75vh",children:(0,n.jsx)(d.ModalBody,{insetLevel:1,tabIndex:0,children:i.map((e=>(0,n.jsx)(u.HotKeyGroup,{group:e},e.title)))})}),(0,n.jsx)(l.ModalFooter,{actions:[(0,n.jsx)(h.Button,{"aria-label":p,mode:"primary",onClick:e,children:p},"close")]})]})})})}},601069:(e,t,i)=>{i.d(t,{HotKeyGroup:()=>a});var n=i(474848),s=i(172656),o=i(557992),r=i(271595);const a=({group:e})=>(0,n.jsx)(s.Group,{header:(0,n.jsx)(o.Header,{children:e.title}),children:e.items.map((e=>(0,n.jsx)(r.HotKeyItem,{item:e},e.value)))},e.title)},271595:(e,t,i)=>{i.d(t,{HotKeyItem:()=>d});var n=i(474848),s=i(724648),o=i(303800),r=i(344356),a=i(670626);const d=({item:e})=>(0,n.jsxs)(s.Flex,{align:"center",noWrap:!0,justify:"space-between",children:[(0,n.jsx)(o.Div,{mode:"horizontal",spacing:4,children:(0,n.jsx)(r.Interpolate,{children:e.description})}),(0,n.jsx)(s.Flex.Item,{flex:"fixed",children:(0,n.jsx)(o.Div,{mode:"horizontal",spacing:4,children:(0,n.jsx)(a.ContentBadge,{type:"text",children:e.value})})})]},e.value)},616238:(e,t,i)=>{i.d(t,{HotKeyGroup:()=>n.HotKeyGroup});var n=i(601069)},30125:(e,t,i)=>{i.d(t,{HotKeyModal:()=>n.HotKeyModal});var n=i(195942)},347881:(e,t,i)=>{i.d(t,{BugReportControl:()=>n.BugReportControl,BugReportModal:()=>n.BugReportModal,HotKeyModal:()=>s.HotKeyModal});var n=i(837606),s=(i(870257),i(149785),i(30125))},584602:(e,t,i)=>{i.d(t,{PlayerV3:()=>U});var n=i(317929),s=i(712600),o=i(550490),r=i(897976),a=i(916497),d=i(636576),l=i(251703),h=i(48921),c=i(34692),u=i(712714),g=i(663939),p=i(461388),v=i(825127),y=i(540462),m=i(564324),_=i(970466),w=i(773439),S=i(890162),M=i(977780),E=i(604958),C=i(403788),I=i(98354),A=i(123158),L=i(477808),x=i(841315),D=i(102088),V=i(452787),T=i(826981),f=i(347881),b=i(561157),N=i(173269),k=i(837759),O=i(856289),j=i(870257),P=i(915795),B=i(319756),R=i(142278);const H=`position.${window.vk.id}`,G="vk-video-player",z="video-expand-hint";window.customElements.get(G)||(0,n.registerPlayerWebComponent)();class U extends b.PlayerV3CompatibilityObject{get langVars(){return this.i18n}get videoLiked(){return this.stateCache.videoLiked}get preferredVolume(){const e=E.default.getPref("volume");return"number"==typeof e?0===e?1:Math.min(1,Math.max(0,e)):1}set preferredVolume(e){E.default.savePref("volume",e)}get preferMute(){return E.default.getPref("muted")}set preferMute(e){E.default.savePref("muted",e)}get forceMuted(){return this.getVar("need_mute")}get el(){return this.rootEl}moveTo(e){this.rootEl=this.createUvPlayerWrapper(),this.mount(e),this.player.moveTo(this.rootEl)}mount(e){e.innerHTML="",e.appendChild(this.el)}createUvPlayerWrapper(){const e=document.createElement("div");return e.setAttribute("id","video_player"),e.setAttribute("preventhide","1"),e.classList.add("uv_player_wrapper"),e}setVars(e){this.vars=e,e.interactive_info&&(this.projectVars=e.interactive_info.project)}getVar(e){return this.vars?this.vars[e]:null}trigger(e,...t){e&&this.eventBus.emit(e,...t)}on(e,t){return this.eventBus.on(e,t)}off(e,t){return this.eventBus.off(e,t)}changeState(e,t=!1){if(this.isInited()||t||this.interactive&&(!this.interactive||e===g.ERROR)){if(e===this.state){if(e!=g.ERROR)return}else this.prevState=this.state,this.state=e,e!=g.ERROR&&(this.errorData=null);this.eventBus.emit(c.STATE_CHANGE,e,this.prevState)}}getState(){return this.state}isInited(){return this.getState()!==g.EMPTY}togglePlay(e){void 0===e&&(e=this.getState()!==g.PLAYING),e?this.play():this.pause()}likeVideo(e){this.externalCall("onLike",e)}shareVideo(e){this.isFullscreen()&&this.toggleFullscreen(),this.externalCall("onShare",e)}toggleFullscreen(){m.screenfull&&(this.isFullscreen()?m.screenfull.exit(this.container):m.screenfull.request(this.container))}isFullscreen(){return m.screenfull&&m.screenfull.isFullscreen}addVideo(e){this.onAdded(),this.videoAdded?this.interactive?this.externalCall("onAdd",this.getVideoId(this.projectVars),this.projectVars.add_hash,e):this.externalCall("onAdd",this.getVideoId(),this.vars.add_hash,e):this.externalCall("onRemove",e)}onAdded(){this.videoAdded=!this.videoAdded,(0,y.partConfigEnabled)("video_modal_refactoring_of_info")&&window.dispatchEvent(new CustomEvent(M.VideoPlayerSyncEvents.TOGGLE_ADDING_TO_MY_VIDEOS,{detail:{isAdded:!this.videoAdded}})),this.eventBus.emit(c.VIDEO_ADD,this.videoAdded)}subscribeToAuthor(e){const t=!this.isSubscribed;this.externalCall("onSubscribe",t,e)}getVideoId(e=this.vars){return e?`${e.oid}_${e.vid}`:null}updateNavigationControls(){if(this.suggestionsOverlayManager){const e=this.getCurrentVideo(),t=e?(0,k.mapVideoFullToVideoHistory)(e):null,i=this.getNextVideos(),n=this.isVideoPage?i:i.map(k.mapVideoPlaylistLegacyToVideoHistory);this.suggestionsOverlayManager.updateVideoData(t,n)}else this.endScreen.updateVideoData(),this.endScreen.getStatus()&&this.endScreen.render()}nextVideo(e,t,i,n){if(this.isVideoPage){const t=window.VideoPageHistory?.shiftNextVideo(n),i=e??t;if(!i||"object"!=typeof i||!("id"in i)||!("owner_id"in i))throw Error("Next video is not a VideoHistory object");this.updateNavigationControls();const s=(0,k.getVideoHistoryUrl)(i),o=window.VideoShowcase?.getVideoPageOpts()||{};return window.VideoShowcase?.setVideoPageOpts({...o,trackCode:i.track_code}),(0,y.partConfigEnabled)("vkvideo_sport_domain")?((0,O.navigateToVideo)(s,{updateLocation:!0}),!1):(window.nav.setLoc(s),!1)}const s=e;return this.externalCall("onVideoNext",s,t,i),!1}prevVideo(){if(!this.isVideoPage)return!1;const e=window.VideoPageHistory?.shiftPrevVideo();if(!e)throw Error("Previous video is not a VideoHistory object");const t=(0,k.getVideoHistoryUrl)(e),i=window.VideoShowcase?.getVideoPageOpts()||{};if(window.VideoShowcase?.setVideoPageOpts({...i,trackCode:e.track_code}),this.updateNavigationControls(),!(0,y.partConfigEnabled)("vkvideo_sport_domain")){if(window.VideoPageHistory?.isActivePlaylist)return window.nav.setLoc(t),!1;const e=window.nav.strLoc;return history.back(),window.nav.setLoc(t,{replace:!0}),history.replaceState({},"",e),!1}const n=new URL(t,window.location.origin);if(window.location.hostname!==n.hostname)return window.location.href=t,!1;const s=(0,O.formatNavigatePath)(n.pathname);if(window.VideoPageHistory?.isActivePlaylist)return window.nav.setLoc(s),!1;const o=window.nav.strLoc;return history.back(),window.nav.setLoc(s,{replace:!0}),history.replaceState({},"",o),!1}play(){const e=this.getState();if(this.interactive?.isGraphOpen||this.interactive?.isExpect)return;if(e===g.PLAYING||e===g.ERROR||!this.isInited()||this.hasDisclaimer)return;this.changeState(g.PLAYING);const t=this.getLivePhase();t!==p.UPCOMING&&t!==p.WAITING&&(this.player.play(),this.externalCall("onVideoStreamPlaying",this.vars.oid,this.vars.vid))}getLivePhase(){return this.livePhase}isActiveLive(){const e=this.getLivePhase();return e===p.WAITING||e===p.STARTED}getInitialTime(){if(this.isActiveLive()||this.interactive)return 0;if(this.vars.t){const e=T.fromString(this.vars.t);if(!this.vars.duration||e<this.vars.duration)return e}else{const e=E.default.getPref(`${H}.${this.getVideoId()}`);if(e&&this.vars.duration-e.pos>30)return e.pos}return 0}isUpcomingLive(){return this.getLivePhase()===p.UPCOMING}pause(){if(this.getState()!==g.PLAYING)return;this.changeState(g.PAUSED);const e=this.getLivePhase();e!==p.UPCOMING&&e!==p.WAITING&&this.player.pause()}getSize(e=!1){if(!this.size||e){let e=this.player.getBoundingClientRect();this.size=[e.width,e.height]}return this.size}onTouchedByUser(){this.isTouchedByUser()||(this.touchedByUser=!0,this.isFromAutoplay()&&(this.eventBus.emit(c.UI_TOUCHED_BY_USER),this.isAutoplaySound()||this.timeouts.setTimeout((()=>{this.toggleMute(!1)}),0)))}isFromAutoplay(){return this.isInited()&&!!this.vars.from_autoplay}isTouchedByUser(){return!!this.touchedByUser}isAutoplay(){return this.isFromAutoplay()&&!this.isTouchedByUser()}isAutoplaySound(){return!!this.vars.autoplay_sound}toggleMute(e=!this.isMuted(),t=!0){if(this.isForceMuted())return!1;const i=e?0:this.preferredVolume;this.player.setMuted(e),this.stateCache.isMuted=e,e||(this.player.setVolume(i),0===i&&(this.stateCache.isMuted=!0)),t&&(this.preferMute=e)}isMuted(){return this.stateCache.isMuted}isForceMuted(){return!!this.forceMuted}externalCall(e,...t){return window.videoCallback&&window.videoCallback([e,...t])}getNextVideos(){return this.isVideoPage?window.VideoPageHistory?window.VideoPageHistory.getNextVideos().slice(0,7):[]:window.Videoview?window.Videoview.getNextVideosData():[]}getNextVideo(){return this.getNextVideos()[0]??null}getCurrentVideoData(){const e=this.getCurrentVideo();if(!e)return null;const{id:t,owner_id:i,track_code:n}=e;return t&&i?{id:t,owner_id:i,track_code:n}:null}getNextOtherVideos(){const e=window.Videoview.getMvData();return e&&e.next_other_videos||[]}resize(){this.player.classList.add("no_transition");let e=this.getSize(!0);this.trigger(c._RESIZE,...e),setTimeout((()=>{this.player.classList.remove("no_transition")}))}setVideo(e,t){t&&this.setVars(t),this.video=e;const i=Boolean(e.live_status)&&(0,y.partConfigEnabled)("video_player_mvk_waiting_live");this.initPlayer(e,{preload:!i}),i?(this.playerLive=new L.PlayerLive,this.playerLive.init({status:e.live_status,startTime:e.live_start_time,ownerId:String(e.owner_id),videoId:String(e.id),accessKey:e.access_key,callbacks:{onLiveStart:e=>{this.player.setLiveStart(e),this.mountVideoActions()},onLiveEnd:e=>{this.player.setLiveEnd(e)}}}),this.unmountVideoActions()):this.isAutoplaySound()&&this.play(),this.stateCache.videoLiked=1===e.likes?.user_likes,this.stateCache.videoAdded=1===e.added||!1,this.stateCache.videoBookmarked=e.is_favorite||!1,t&&Object.keys(t).map((e=>{if(e.startsWith("lang_")){const i=e.replace("lang_","");this.i18n[i]=t[e],window.cur.lang[i]=t[e]}})),this.videoActions.setI18n(this.i18n),this.video&&this.videoActions.update(this.gatherVideoActionsState(this.video,this.vars)),this.expandHint.setText((0,D.getLang)("autoplay_expand_hint")),this.endScreen.initVideo(),this.suggestionsOverlayManager&&this.suggestionsOverlayManager.setRenderMethod()}stop(){this.player.stop()}setMuted(e){this.player.setMuted(e)}setVolume(e){this.player.setVolume(e)}setRepeat(e){this.player.setRepeat(e)}seekTo(e){this.player.seekTime(e)}toggleLoop(e){this.player.setRepeat(e)}createPlayerConfig(e={}){return{...e,videos:[],autoplay:!!window.VideoPlaylist&&window.VideoPlaylist.isAutoplayEnabled(),showEndScreen:!1,showAutoplayNext:!0,showThumbTimer:this.isInline(),logoHidden:!this.isInLayer(),logoClickable:!0,callbacks:{...e.callbacks||{},onPlay:()=>{this.videoEnded&&(this.unmountEndScreen(),this.unmountSuggestionsOverlay(),this.mountVideoActions(),this.videoActions.show())},onFullscreenEnter:this.onFullscreenEnter.bind(this),onFullscreenExit:this.onFullscreenExit.bind(this),onLogoClicked:this.handleLogoClicked,onTimeupdate:this.onTimeupdate.bind(this),onSeek:this.onSeek.bind(this),onPlaybackStateChanged:this.onPlaybackStateChanged.bind(this),onEpisodeClicked:this.onEpisodeClicked.bind(this),onEnded:this.onEnded.bind(this),onCopyVideoLink:this.onCopyVideoLink.bind(this),onAudioDisabledHint:this.onAudioDisabledHint.bind(this),onAudioDoesNotExistHint:this.onAudioDisabledHint.bind(this),onNextVideoClick:this.nextVideo.bind(this),onPrevVideoClick:this.prevVideo.bind(this),onSetAutoplayNextEnabled:this.handleAutoplayChanged.bind(this),onVSIDChanged:this.handleVSIDChanged,onOpenHotKeyMap:this.handleOpenHotKeyMap,uiInfo:{onControlsVisibleChanged:this.onControlsVisibleChanged.bind(this),onPlayerSizeChanged:this.onPlayerSizeChanged.bind(this),...this.getNavButtonsHoverCallbacks()}}}}getNavButtonsHoverCallbacks(){return this.isVideoPage?{onPrevButtonMouseEnter:e=>{this.showPrevVideoPreview(e)},onPrevButtonMouseLeave:()=>{this.hidePrevVideoPreview()},onNextButtonMouseEnter:e=>{this.showNextVideoPreview(e)},onNextButtonMouseLeave:()=>{this.hideNextVideoPreview()}}:{}}showPrevVideoPreview(e){const t=document.createElement("div");t.classList.add("videoplayer_video_preview"),t.style.left=`${e.left}px`;let i=(window.VideoPageHistory?.getPrevVideos()||[])[0];if(!i)return;const n={video:i};try{this.player.slotsApi?.add(t,{id:"prev-preview",overlay:"over_video"})}catch(e){}(0,j.renderControlPreviewCard)(t,n)}hidePrevVideoPreview(){try{this.player.slotsApi?.remove("prev-preview")}catch(e){}}showNextVideoPreview(e){const t=document.createElement("div");t.classList.add("videoplayer_video_preview"),t.style.left=`${e.left}px`;let i=(window.VideoPageHistory?.getNextVideos()||[])[0];if(!i)return;const n={video:i};try{this.player.slotsApi?.add(t,{id:"next-preview",overlay:"over_video"})}catch(e){}(0,j.renderControlPreviewCard)(t,n)}hideNextVideoPreview(){try{this.player.slotsApi?.remove("next-preview")}catch(e){}}onFullscreenEnter(){this.stateCache.isFullscreen=!0,this.videoActions.update({isFullscreen:!0}),this.theaterModeService?.hide()}onFullscreenExit(){this.stateCache.isFullscreen=!1,this.videoActions.update({isFullscreen:!1}),this.theaterModeService?.show()}onTimeupdate(e,t){this.stateCache.duration=e,this.stateCache.position=t,this.isActiveLive()||this.savePosition()}onSeek(){this.suggestionsOverlayManager?this.suggestionsOverlayManager.status&&this.unmountSuggestionsOverlay():this.endScreen.getStatus()&&this.unmountEndScreen()}savePosition(){const e=this.stateCache.duration;if(0===e)return;let t=this.stateCache.position;const i=`${H}.${this.getVideoId()}`;e-t<Math.max(.01*e,1)?E.default.deletePref(i):E.default.savePref(i,{date:Date.now(),pos:t})}onPlaybackStateChanged(e){e&&(this.changeState(e),this.stateCache.playbackState=e)}onEpisodeClicked(){this.isInline()?(this.onExpandClick(),this.externalCall("openTimeCodesList",!0)):this.isInLayer()?window.Videoview?.openTimeCodesList():window.dispatchEvent(new CustomEvent(M.VideoEvents.OPEN_EPISODE_LIST))}onEnded(){this.unmountVideoActions(),this.unmountExpandHint(),this.videoEnded=!0,this.canShowEndScreen()?this.suggestionsOverlayManager?this.mountSuggestionsOverlay():this.mountEndScreen():this.nextVideo()}canShowEndScreen(){return(!this.getVar("live")||this.getVar("live")===p.ENDED)&&!this.shouldSkipPlaylistEndscreen()}shouldSkipPlaylistEndscreen(){const e=window.VideoPageHistory?.playlist;if(!e)return!1;const t=this.autoplayEnabled,i=e.isReversed?0===e.currentPosition:e.currentPosition+1===e.videos.length;return this.isVideoPage&&window.VideoPageHistory?.isActivePlaylist&&t&&(!i||(0,y.partConfigEnabled)("video_videopage_playlist_repeat_btn")&&e.repeat)}onControlsVisibleChanged(e){e?(this.videoActions?.show(),this.showExpandHint()):(this.videoActions?.hide(),this.hideExpandHint())}onPlayerSizeChanged({width:e,height:t}){window.dispatchEvent(new CustomEvent(M.VideoPlayerSyncEvents.RESIZE,{detail:{width:e,height:t}}))}onCopyVideoLink(){const e=this.getCurrentVideo();return e?(0,x.getVideoCopyLink)(e,this.stateCache.position):""}onAudioDisabledHint(){this.exitFullscreen().then((()=>{this.externalCall("showVideoMutePopup",this.getVar("mute_faq_link"),(0,D.getLang)("video_mute_popup_title"),(0,D.getLang)("video_mute_popup_text"),(0,D.getLang)("video_mute_popup_button_text"))}))}createVideoActions(){const e=new a.VideoActions,t=this.onGoodsButtonClick.bind(this),i=this.onDonatButtonClick.bind(this),n=this.onLikeButtonClick.bind(this),s=this.onShareButtonClick.bind(this),o=this.onFavButtonClick.bind(this),r=this.onAddButtonClick.bind(this);return e.on(a.VideoActionsEvents.GOODS_BUTTON_CLICKED,t),e.on(a.VideoActionsEvents.DONAT_BUTTON_CLICKED,i),e.on(a.VideoActionsEvents.LIKE_BUTTON_CLICKED,n),e.on(a.VideoActionsEvents.SHARE_BUTTON_CLICKED,s),e.on(a.VideoActionsEvents.BOOKMARK_BUTTON_CLICKED,o),e.on(a.VideoActionsEvents.ADD_BUTTON_CLICKED,r),this.destroyVideoActions=()=>{e.off(a.VideoActionsEvents.GOODS_BUTTON_CLICKED,t),e.off(a.VideoActionsEvents.DONAT_BUTTON_CLICKED,i),e.off(a.VideoActionsEvents.LIKE_BUTTON_CLICKED,n),e.off(a.VideoActionsEvents.SHARE_BUTTON_CLICKED,s),e.off(a.VideoActionsEvents.BOOKMARK_BUTTON_CLICKED,o),e.off(a.VideoActionsEvents.ADD_BUTTON_CLICKED,r)},e}mountSuggestionsOverlay(){if(this.suggestionsOverlayManager)try{const e=this.suggestionsOverlayManager.render();if(!this.player.slotsApi||!e)return;this.player.slotsApi?.add(e,{overlay:"over_video",id:"suggestions-overlay"})}catch(e){}}unmountSuggestionsOverlay(){try{this.suggestionsOverlayManager&&this.suggestionsOverlayManager.destroy(),this.player.slotsApi?.remove("suggestions-overlay")}catch(e){}}mountEndScreen(){try{const e=this.endScreen.render();if(!this.player.slotsApi||!e)return;this.player.slotsApi?.add(e,{overlay:"over_video",id:"end-screen"})}catch(e){}}unmountEndScreen(){try{this.endScreen.deinitVideo(),this.player.slotsApi?.remove("end-screen")}catch(e){}}mountVideoActions(){try{this.player.annotationsApi?.add("video-actions",this.videoActions.el)}catch(e){}}unmountVideoActions(){try{this.player.annotationsApi?.remove("video-actions")}catch(e){}}mountExpandHint(){try{this.player.slotsApi?.add(this.expandHint.render(),{overlay:"over_video",id:z})}catch(e){}this.expandHint.el&&(this.expandHint.el.onclick=this.onExpandClick.bind(this))}unmountExpandHint(){this.expandHint.el&&(this.expandHint.el.onclick=null);try{this.player.slotsApi?.remove(z)}catch(e){}}showVideoActions(){this.videoActions.show()}hideVideoActions(){this.videoActions.hide()}showExpandHint(){this.expandHint.show()}hideExpandHint(){this.expandHint.hide()}initPlayer(e,t={}){const i=window.VideoPageHistory?.getPrevVideos().map(k.mapVideoHistoryToLegacyVideo)||[],n=(0,r.constructConfig)([...i,e]),s=this.getInitialTime(),o=this.isInline(),a=[];(0,y.partConfigEnabled)("video_player_enable_bugreport")&&a.push(this.buildBugreportButton()),this.isInline()&&a.push(this.buildExpandButton()),this.isVideoPage&&this.theaterModeService&&a.push(this.theaterModeService.build());const d=this.tuningConfig?.ui?.ads?.slot??e.ads?.slot_id,l={...this.playerConfig,...n,fromTime:s,muted:o,...t,showAds:!!d,adsSlotId:d,adsParams:e.ads?.params,adsPreviewParam:this.tuningConfig?.ui?.ads?.preview,videoIndex:window.VideoPageHistory?.getCurrentPosition()??0,additionalButtons:a};this.player.initPlayer(l,this.tuningConfig),this.updateNextVideos(),window.VideoPlaylist?.events.on("playlistorderchange",this.onPlaylistOrderChangeHandler),this.isInline()?(this.isAutoplay()&&this.mountExpandHint(),this.mountVideoActions()):this.isInLayer()&&this.mountVideoActions()}renderBugReportModal(){const e=document.createElement("div"),t=(0,R.createReactInitiator)(f.BugReportModal,e);this.isActiveLive()||this.pause(),this.isFullscreen()&&this.toggleFullscreen(),t.render({getLang:D.getLang,getStatProps:()=>({debugData:this.player.getDebugData(),ownerId:this.vars.oid,videoId:this.vars.vid,vsid:this.vsid??"unknown"}),onClose:()=>t.unmount()})}buildBugreportButton(){return{id:"bugreport-button",weight:310,type:n.ControlButtonType.DESKTOP_CONTROL_PANEL_RIGHT,icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0xMC41IDEwLjRhLjkuOSAwIDAgMSAuOS0uOWgxLjJhLjkuOSAwIDEgMSAwIDEuOGgtMS4yYS45LjkgMCAwIDEtLjktLjltMCA1YS45LjkgMCAwIDEgLjktLjloMS4yYS45LjkgMCAxIDEgMCAxLjhoLTEuMmEuOS45IDAgMCAxLS45LS45Ij48L3BhdGg+PHBhdGggZD0iTTMgOGEuOS45IDAgMCAxIC45LS45aDIuMjc1YTYuOSA2LjkgMCAwIDEgMS43Ny0xLjg4M2wtMS42ODEtMS42OGEuOS45IDAgMCAxIDEuMjcyLTEuMjczbDIuMDY1IDIuMDY0QTYuOSA2LjkgMCAwIDEgMTIgMy45Yy44NDQgMCAxLjY1Mi4xNTEgMi4zOTkuNDI4bDIuMDY1LTIuMDY0YS45LjkgMCAwIDEgMS4yNzIgMS4yNzJsLTEuNjggMS42ODFhNi45IDYuOSAwIDAgMSAxLjc3IDEuODgzSDIwLjFhLjkuOSAwIDEgMSAwIDEuOGgtMS40NjVjLjE3My42MDQuMjY1IDEuMjQxLjI2NSAxLjl2MS4zaDMuMmEuOS45IDAgMSAxIDAgMS44aC0zLjJWMTVjMCAuNzMyLS4xMTQgMS40MzgtLjMyNSAyLjFIMjAuMWEuOS45IDAgMSAxIDAgMS44aC0yLjQwN2E2LjkgNi45IDAgMCAxLTUuNjkzIDMgNi45IDYuOSAwIDAgMS01LjY5My0zSDMuOWEuOS45IDAgMCAxIDAtMS44aDEuNTI1QTYuOSA2LjkgMCAwIDEgNS4xIDE1di0xLjFIMS45YS45LjkgMCAwIDEgMC0xLjhoMy4ydi0xLjNjMC0uNjU5LjA5Mi0xLjI5Ni4yNjUtMS45SDMuOUEuOS45IDAgMCAxIDMgOG0zLjkgMi44YTUuMSA1LjEgMCAxIDEgMTAuMiAwVjE1YTUuMSA1LjEgMCAwIDEtMTAuMiAweiIgY2xpcC1ydWxlPSJldmVub2RkIj48L3BhdGg+PHBhdGggZD0iTTEwLjUgMTAuNGEuOS45IDAgMCAxIC45LS45aDEuMmEuOS45IDAgMSAxIDAgMS44aC0xLjJhLjkuOSAwIDAgMS0uOS0uOW0wIDVhLjkuOSAwIDAgMSAuOS0uOWgxLjJhLjkuOSAwIDEgMSAwIDEuOGgtMS4yYS45LjkgMCAwIDEtLjktLjkiPjwvcGF0aD48L3N2Zz4=",ariaLabel:(0,D.getLang)("bugreport_aria_label"),tooltipText:(0,D.getLang)("bugreport_aria_label"),onClick:()=>this.renderBugReportModal(),hideOnDesktopGridTypes:[n.GridTypes.XS]}}renderHotKeyModal(e){const t=document.createElement("div"),i=(0,R.createReactInitiator)(f.HotKeyModal,t);i.render({hotKeyMapData:e,onClose:()=>i.unmount()})}onExpandClick(){this.isAutoplay()&&(this.expandFromAutoplay=!0,this.pause());const e=this.interactive?this.projectVars.list_id:this.vars.list_id,t=T.toString(this.stateCache.position),i=this.interactive?this.getVideoId(this.projectVars):this.getVideoId();this.externalCall("onOpenInPopup",i,e,t)}buildExpandButton(){return{id:"expand-button",weight:320,type:n.ControlButtonType.DESKTOP_CONTROL_PANEL_RIGHT,icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iNzI4IDQ4MCAxOCAxNiI+PHBhdGggZD0iTTcyOSA0ODEuOTk0YzAtMS4xLjg5NS0xLjk5NCAxLjk5NC0xLjk5NGgxMi4wMTJjMS4xIDAgMS45OTQuODk1IDEuOTk0IDEuOTk0djEyLjAxMmMwIDEuMS0uODk1IDEuOTk0LTEuOTk0IDEuOTk0aC0xMi4wMTJjLTEuMSAwLTEuOTk0LS44OTUtMS45OTQtMS45OTR6bTIgNC4wMDRjMC0uNTUuNDU2LS45OTggMS4wMDItLjk5OGg5Ljk5NmExIDEgMCAwIDEgMS4wMDIuOTk4djcuMDA0YzAgLjU1LS40NTYuOTk4LTEuMDAyLjk5OGgtOS45OTZhMSAxIDAgMCAxLTEuMDAyLS45OTh6IiBmaWxsPSIjRkZGIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=",ariaLabel:(0,D.getLang)("autoplay_expand_hint"),tooltipText:(0,D.getLang)("autoplay_expand_hint"),onClick:this.onExpandClick.bind(this)}}handleAutoplayChanged(e){this.autoplayEnabled=e,window.dispatchEvent(new CustomEvent(M.VideoPlaylistEvents.TOGGLE_AUTOPLAY,{detail:e}))}updateNextVideos(){if(this.isVideoPage){const e=window.VideoPageHistory?.getNextVideos().map(k.mapVideoHistoryToLegacyVideo);return this.player.updateNextVideos(e),void this.updateNavigationControls()}const e=[],t=window.VideoPlaylist?.getNextVideoData();t&&t.title&&t.thumbUrl&&e.push({sources:{},...t}),this.player.updateNextVideos(e),this.updateNavigationControls()}updatePrevVideos(){const e=window.VideoPageHistory?.getPrevVideos().map(k.mapVideoHistoryToLegacyVideo);this.player&&e&&this.player.updatePrevVideos(e)}gatherVideoActionsState(e,t){return{isVisible:!0,isFullscreen:this.stateCache.isFullscreen,isGoodsVisible:!!t.enable_goods_recognition&&!this.isInline(),isDonatVisible:!!t.can_donate,isLikeVisible:!!e.can_like,isShareVisible:!!e.can_repost,isFavVisible:!!e.can_add_to_faves,isAddVisible:!!e.can_add,shared:1===e.reposts?.user_reposted,liked:this.stateCache.videoLiked,bookmarked:this.stateCache.videoBookmarked,added:this.stateCache.videoAdded}}setRecomVideos(e){this.isVideoPage&&(window.VideoPageHistory?.setRecomVideos(e),this.updateNavigationControls())}pushVideoToHistory(e){this.isVideoPage&&(window.VideoPageHistory?.pushVideoToHistory(e),this.updateNavigationControls())}isInLayer(){return this.vars.inLayer}isInline(){return this.vars.inline}updateStateCache(e){this.stateCache={...this.stateCache,...e},this.video&&this.videoActions.update(this.gatherVideoActionsState(this.video,this.vars))}async exitFullscreen(){try{await document.exitFullscreen()}catch(e){}}isBookmarked(){return this.stateCache.videoBookmarked}isAdded(){return this.stateCache.videoAdded}onGoodsButtonClick(){this.pause(),this.isFullscreen()&&this.exitFullscreen(),(0,d.statlogsValueEvent)("video_goods_recognition","","start"),(0,l.tmrTrackCustomGoal)("click_check_items"),window.dispatchEvent(new CustomEvent(h.CustomEventName,{detail:{eventType:"START",data:{frame_time:Math.floor(1e3*this.stateCache.position),owner_id:this.vars.oid,video_id:this.vars.vid}}}))}onDonatButtonClick(){this.isFullscreen()&&this.exitFullscreen(),this.externalCall("onDonate",this.getActionsType())}onLikeButtonClick(){this.updateStateCache({videoLiked:!this.stateCache.videoLiked}),this.externalCall("onLike",this.getActionsType())}onShareButtonClick(){this.isFullscreen()&&this.exitFullscreen(),this.externalCall("onShare",this.getActionsType())}onFavButtonClick(){this.isBookmarked()?(this.updateStateCache({videoBookmarked:!1}),this.externalCall("onRemoveBookmark",this.getActionsType())):(this.updateStateCache({videoBookmarked:!0}),this.externalCall("onAddBookmark",this.getActionsType())),(0,y.partConfigEnabled)("video_modal_refactoring_of_info")&&_.videoModalFaveService.toggleFaveEvent({ownerId:this.vars.oid,id:this.vars.vid}),this.eventBus.emit(c.VIDEO_BOOKMARK,this.stateCache.videoBookmarked)}onAddButtonClick(){this.isAdded()?(this.updateStateCache({videoAdded:!1}),this.externalCall("onRemove",this.getActionsType())):(this.updateStateCache({videoAdded:!0}),this.externalCall("onAdd",this.getVideoId(),this.vars.add_hash,this.getActionsType())),(0,y.partConfigEnabled)("video_modal_refactoring_of_info")&&_.videoModalAlbumsService.playerAddEvent({isAdded:this.stateCache.videoAdded}),this.eventBus.emit(c.VIDEO_ADD,this.stateCache.videoAdded)}getActionsType(){return this.stateCache.playbackState===w.PlaybackState.STOPPED?u.END_SMALL:u.INLINE}getTimeCodes(){return this.interactive?.movikaInteractive?this.getInteractiveTimeCodes(this.interactive):this.getCurrentVideo()?.episodes||[]}getCurrentTimeCode(e){const t=this.getTimeCodes();let i="",n=0;if(t)for(let s=0;s<t.length&&(t?.[s]?.time||0)<=e;s++)i=t?.[s]?.text||"",n=s;return{text:i,index:n}}getCurrentVideo(){return this.video}getThumbFromTime(e,t=150){const i=this.getCurrentVideo();if(i&&i.timeline_thumbs){const n=e/this.stateCache.duration,s={countPerImage:i.timeline_thumbs.count_per_image||0,countPerRow:i.timeline_thumbs.count_per_row||0,countTotal:i.timeline_thumbs.count_total||0,frameHeight:i.timeline_thumbs.frame_height||0,frameWidth:i.timeline_thumbs.frame_width||0,frequency:i.timeline_thumbs.frequency||0,isUV:i.timeline_thumbs.is_uv||!1,links:i.timeline_thumbs.links||[]};return(0,I.getEpisodeThumb)(s,n,this.stateCache.duration,t)}return{}}onPlaylistOrderChange(){this.updateNextVideos()}onViewport(e){this.trigger(c.UI_IN_VIEWPORT,e)}deinitVideo(){this.destroy()}setVideoPagePlaylist(e){if(this.isVideoPage){if(!e)return window.VideoPageHistory?.setIsActivePlaylist(!1),void window.VideoPageHistory?.setPlaylist({videos:[],currentPosition:-1,isReversed:!1});window.VideoPageHistory?.setIsActivePlaylist(!0),window.VideoPageHistory?.setPlaylist(e),this.updatePrevVideos(),this.updateNextVideos()}}onExternalAdded(){this.trigger(c.VIDEO_ADD,this.videoAdded)}getProjectId(){return this.getVideoId()}destroy(){this.pause(),this.player.remove(),this.el.remove(),this.destroyVideoActions?.(),this.off(c.UI_TOUCHED_BY_USER,this.handleUserTouched),this.unmountEndScreen(),this.unmountSuggestionsOverlay(),this.unmountExpandHint(),this.rootEl.removeEventListener("click",this.handleClick,{capture:!0}),window.VideoPlaylist?.events.off("playlistorderchange",this.onPlaylistOrderChangeHandler),super.destroy()}constructor(e,t={},i={}){super(e),this.video=null,this.suggestionsOverlayManager=null,this.videoEnded=!1,this.isVideoPage=(0,O.isVideoPageOpen)(),this.stateCache={isMuted:!1,isFullscreen:!1,playbackState:w.PlaybackState.READY,duration:0,position:0,videoBookmarked:!1,videoAdded:!1,videoLiked:!1},this.timeouts=new C.TimeoutStore,this.state="",this.prevState="",this.livePhase=0,this.container=null,this.nextTimerStopped=!1,this.projectVars={},this.size=[0,0],this.videoAdded=!1,this.isSubscribed=!1,this.touchedByUser=!1,this.hasDisclaimer=!1,this.playerLive=null,this.autoplayEnabled=JSON.parse(localStorage.getItem("vk_player_preferred_autoplay_next")??"false"),this.destroyVideoActions=()=>{},this.handleClick=e=>{e.target instanceof Node&&this.expandHint.el?.contains(e.target)||this.onTouchedByUser()},this.handleUserTouched=()=>{this.unmountExpandHint()},this.handleLogoClicked=()=>{const e=this.getCurrentVideo();e&&(0,A.onLogoClick)(e,{position:this.stateCache.position})},this.handleVSIDChanged=e=>{this.vsid=e},this.handleOpenHotKeyMap=e=>{this.renderHotKeyModal(e)},U.instanceCount=(U.instanceCount+1)%Number.MAX_SAFE_INTEGER,this.$uid=U.instanceCount,this.playerConfig=this.createPlayerConfig(t),this.tuningConfig=i,this.eventBus=new v.default,this.rootEl=this.createUvPlayerWrapper(),this.i18n={},this.rootEl.addEventListener("click",this.handleClick,{capture:!0}),this.player=document.createElement(G),this.rootEl.appendChild(this.player);const n=(0,B.ensureDIRootWebContainer)();if(this.videoActions=this.createVideoActions(),this.eventBus.on(c.UI_TOUCHED_BY_USER,this.handleUserTouched),this.endScreen=new N.NewEndScreen(this),(0,y.partConfigEnabled)("video_embed_suggestion_overlay")&&(this.suggestionsOverlayManager=new P.SuggestionsOverlayManager({onVideoClick:e=>this.nextVideo(e),getPlayerWidth:()=>this.getSize(!0)[0],getAutoplayStatus:()=>this.autoplayEnabled,diContainer:n})),this.expandHint=new S.VideoExpandHint((0,D.getLang)("autoplay_expand_hint")),(0,y.partConfigEnabled)("video_videopage_theater_mode")){const e=(0,B.ensureDIRootWebContainer)();this.theaterModeService=new V.TheaterModeService(e.resolve(s.Langs),e.resolve(o.Cookie)),this.theaterModeService.setPlayer(this.player)}this.hasDisclaimer=!!this.vars.restriction,this.liveStartTime=this.vars.live_start?1e3*this.getVar("live_start"):0,this.onPlaylistOrderChangeHandler=this.onPlaylistOrderChange.bind(this)}}U.instanceCount=0},561157:(e,t,i)=>{i.d(t,{PlayerV3CompatibilityObject:()=>s});var n=i(403788);class s{canExpand(){return!0}destroy(){this._timeouts.clearAll()}onExpanded(){}onLiked(){}getInteractiveTimeCodes(e){const t=e.interactiveRanges;if(t.length<1)return[];t.sort(((e,t)=>e.range[0]-t.range[0]));let i=[t[0]];for(let e=1;e<t.length;e++){let n=i[i.length-1];t[e].range[0]<=n.range[1]?(n.range[1]=Math.max(n.range[1],t[e].range[1]),n.subjects=[...new Set([...n.subjects,...t[e].subjects])]):i.push(t[e])}return i.reduce(((e,{range:[t,i],subjects:n},s)=>(0===s&&t>0&&e.push({time:0,isInteractive:!1,subjects:[],midTime:t/1e3}),isFinite(t)&&e.push({time:t/1e3,isInteractive:!0,subjects:n,midTime:i/1e3}),isFinite(i)&&e.push({time:i/1e3,isInteractive:!1,subjects:[],midTime:i/1e3}),e)),[])}constructor(e){this._timeouts=new n.TimeoutStore,this.expandFromAutoplay=!1,this.vars=e}}},128378:(e,t,i)=>{i.d(t,{VideoPlayerService:()=>a});var n=i(584602),s=i(1100),o=i(957994),r=i(768035);const a=new class{async createPlayer(e,t={}){return[this.playerClass,this.tuningConfig]=await Promise.all([this.playerClass?this.promisify(this.playerClass):this.loadPlayerClass(),this.tuningConfig?this.promisify(this.tuningConfig):this.loadPlayerConfig()]),new n.PlayerV3(e,t,this.tuningConfig)}async promisify(e){return e}killPlayer(e){e.destroy(),window.mvcur&&window.mvcur.player===e&&(window.mvcur.player=void 0)}killCurrentPlayer(){const e=this.getActivePlayer();e&&this.killPlayer(e)}async playVideo(e,t,i,n={}){this.activePlayer&&this.activePlayer.destroy();const s=await this.loadVideo(e);if(!s)throw new Error("Video not found");const o=await this.createPlayer(i,n);return o.mount(t),this.setActivePlayer(o,window.mvLayer?.contains(t)),o.setVideo(s,i),o}getActivePlayer(){return this.activePlayer}setActivePlayer(e,t=!1){this.activePlayer=e,t?(i._dG("mvcur",window.mvcur||{}),window.mvcur.player=e):(i._dG("cur",window.cur||{}),window.cur.videoInlinePlayer=e)}async loadPlayerConfig(){const e=await(0,o.api)("video.getPlayerConfig",{module:"web"});if(Object.hasOwn(e,"error")||!e.config)throw new Error("Error while fetching config");return e.config||{}}async loadVideo(e){const{id:t,ownerId:i,accessKey:n}=(0,r.parseRawId)(e);return(await(0,s.fetchVideo)(i,t,n)).items[0]}async loadPlayerClass(){const{PlayerV3:e}=await Promise.resolve().then(i.bind(i,584602));return e}constructor(){this.playerClass=void 0,this.activePlayer=void 0,this.tuningConfig=void 0}};i._dG("VideoPlayerService",a)},173269:(e,t,i)=>{i.d(t,{NewEndScreen:()=>l});var n=i(873900),s=i(540462),o=i(553608),r=i(432081),a=i(975186),d=i(837759);class l extends a.PlayerComponent{getStatus(){return this.status}render(){if(this.renderMethod&&this.currentVideo&&this.nextVideos.length)return this.destroy(),this.unmountMethod=this.renderMethod(this.el,{currentVideo:this.currentVideo,nextVideos:this.nextVideos,autoplayStatus:this.getAutoplayStatus(),playerWidth:this.player.getSize(!0)[0],isAnnouncementClosed:this.isAnnouncementClosed,onAnnouncementClose:()=>this.setAnnouncementClosed(!0),onAnnouncementClick:e=>this.onNextVideo(e),onAnnouncementTimer:e=>this.onNextVideo(e),onSuggestionClick:e=>this.onNextVideo(e)}),this.status=!0,this.el.focus(),(0,s.partConfigEnabled)("use_uv_videoplayer_on_web")?this.el:void 0;this.status=!1}destroy(){super.destroy(),this.unmountMethod?.(),this.unmountMethod=null,this.status=!1}updateVideoData(){this.currentVideo=this.player.getCurrentVideoData(),this.nextOtherVideos=[];const e=this.player.getNextVideos().slice(0,this.nextVideosLimit);if(this.player.isVideoPage)this.nextVideos=e;else if(e.length===this.nextVideosLimit)this.nextVideos=e.map(d.mapVideoPlaylistLegacyToVideoHistory);else{const t=e.map(d.mapVideoPlaylistLegacyToVideoHistory),i=this.nextVideosLimit-e.length,n=this.player.getNextOtherVideos().slice(0,i).map(d.mapVideoOtherLegacyToVideoHistory);this.nextVideos=[...t,...n],this.nextOtherVideos=n}}initVideo(){const e=!!(0,s.partConfigEnabled)("use_uv_videoplayer_on_web")||this.player.ui.canShowEndScreen();!this.renderMethod&&e&&Promise.resolve().then(i.bind(i,149785)).then((({renderVideoPlayerEndScreen:e})=>{this.renderMethod=e}))}deinitVideo(){this.destroy(),this.setAnnouncementClosed(!1)}getAutoplayStatus(){return(0,s.partConfigEnabled)("use_uv_videoplayer_on_web")?this.player.autoplayEnabled:!o.vkLocalStorage.getItem("video_playlist_autoplay_disabled")}onNextVideo(e){if(this.destroy(),this.player.isVideoPage)return void this.player.nextVideo(e,!1,!1,!0);const t=(0,n.getIdentityRawId)({id:e.id,ownerId:e.owner_id});if(!Boolean(this.nextOtherVideos.find((({id:t,owner_id:i})=>e.id===t&&e.owner_id===i))))return void this.player.nextVideo(t,!1,!1,!0);let i=window.Videoview.getVideoModule(t);"is_showcase"in window.cur&&window.cur.is_showcase&&(i+=":similar"),(0,r.showVideo)(t,"",{autoplay:1,module:i})}setAnnouncementClosed(e){this.isAnnouncementClosed=e}constructor(e){super(e),this.currentVideo=null,this.nextVideos=[],this.nextVideosLimit=8,this.nextOtherVideos=[],this.status=!1,this.isAnnouncementClosed=!1,this.renderMethod=null,this.unmountMethod=null,this.el=document.createElement("div"),this.el.tabIndex=0,(0,s.partConfigEnabled)("use_uv_videoplayer_on_web")&&(this.el.style.position="absolute",this.el.style.inset="0")}}},916497:(e,t,i)=>{i.d(t,{VideoActions:()=>_,VideoActionsEvents:()=>m});var n=i(994781),s=i(938307),o=i(573046),r=i(230337),a=i(876838),d=i(863404),l=i(453829),h=i(101594),c=i(38050),u=i(784394),g=i(977202),p=i(825127),v=i(795168),y=i(540462);var m=function(e){return e.GOODS_BUTTON_CLICKED="GoodsButtonClicked",e.DONAT_BUTTON_CLICKED="DonatButtonClicked",e.LIKE_BUTTON_CLICKED="LikeButtonClicked",e.SHARE_BUTTON_CLICKED="ShareButtonClicked",e.BOOKMARK_BUTTON_CLICKED="BookmarkButtonClicked",e.ADD_BUTTON_CLICKED="AddButtonClicked",e}({});class _{get el(){return this.root}update(e){const t=Object.assign({...this.state},e);this.applyElementVisibility(this.root,t.isVisible),this.applyElementClass(this.root,t.isFullscreen,"fullscreen"),this.goodsButton&&this.applyElementVisibility(this.goodsButton,t.isGoodsVisible),this.donatButton&&this.applyElementVisibility(this.donatButton,t.isDonatVisible),this.likeButton&&this.applyElementVisibility(this.likeButton,t.isLikeVisible),this.shareButton&&this.applyElementVisibility(this.shareButton,t.isShareVisible),this.favButton&&this.applyElementVisibility(this.favButton,t.isFavVisible),this.addButton&&this.applyElementVisibility(this.addButton,t.isAddVisible),this.goodsButton&&this.setButtonText(this.goodsButton,this.localize("goods_in_frame")),this.likeButton&&this.setButtonIcon(this.likeButton,t.liked?(0,n.getIcon24Like)().icon:(0,s.getIcon24LikeOutline)().icon),this.favButton&&this.setButtonIcon(this.favButton,this.getBookmarkIcon(t.bookmarked)),this.addButton&&this.setButtonIcon(this.addButton,t.added?(0,o.getIcon24DoneOutline)().icon:(0,r.getIcon24AddOutline)().icon),t.liked?this.likeButton&&!this.likeButton.classList.contains("m-red")&&this.likeButton.classList.add("m-red"):this.likeButton&&this.likeButton.classList.remove("m-red"),(0,y.partConfigEnabled)("video_bookmarks_renaming_to_watch_later"),this.state=t}show(){this.showElement(this.root)}hide(){this.hideElement(this.root)}on(e,t){if(void 0!==e)return this.eventBus.on(e,t);this.debugLog(["trying to set listener to undefined event"])}off(e,t){if(void 0!==e)return this.eventBus.off(e,t);this.debugLog(["trying to unset listener from undefined event"])}setI18n(e){this.i18n=e}applyElementClass(e,t,i){t?e.classList.add(i):e.classList.remove(i)}applyElementVisibility(e,t){t?this.showElement(e):this.hideElement(e)}hideElement(e){e.classList.add("m-hidden")}showElement(e){e.classList.remove("m-hidden")}render(){this.root=this.createRootElement(),this.tooltip=new v.Tooltip(this.root),this.styleSheet=this.createStyles(),this.goodsButton=this.createButton({classes:["m-goods"],icon:(0,a.getIcon24ScanViewfinderOutline)().icon,innerText:this.localize("goods_in_frame"),handler:()=>{this.eventBus.emit("GoodsButtonClicked")}}),this.donatButton=this.createButton({icon:(0,d.getIcon24GiftOutline)().icon,tooltipText:()=>this.localize("donate"),handler:()=>{this.eventBus.emit("DonatButtonClicked")}}),this.likeButton=this.createButton({icon:(0,s.getIcon24LikeOutline)().icon,tooltipText:()=>this.localize("like"),classes:this.state.liked?["m-red"]:[],handler:()=>{this.eventBus.emit("LikeButtonClicked")}}),this.shareButton=this.createButton({icon:(0,l.getIcon24ShareOutline)().icon,tooltipText:()=>this.localize("share"),handler:()=>{this.eventBus.emit("ShareButtonClicked")}}),this.favButton=this.createButton({icon:this.getBookmarkIcon(this.state.bookmarked),tooltipText:()=>this.localize(this.state.bookmarked?"video_remove_from_watch_later":"video_catalog_showcase_section_my_watch_later_title"),handler:()=>{this.eventBus.emit("BookmarkButtonClicked")}}),this.addButton=this.createButton({icon:(0,r.getIcon24AddOutline)().icon,tooltipText:()=>this.localize(this.state.added?"added":"add"),handler:()=>{this.eventBus.emit("AddButtonClicked")}}),this.root.append(this.styleSheet),this.root.append(this.goodsButton),this.root.append(this.donatButton),this.root.append(this.likeButton),this.root.append(this.shareButton),this.root.append(this.favButton),this.root.append(this.addButton),this.root.appendChild(this.tooltip.el)}localize(e){const t=this.i18n[e];return Array.isArray(t)?t[0]:t}setButtonIcon(e,t){e.firstChild?e.replaceChild(this.compileSVGString(t),e.firstChild):e.appendChild(this.compileSVGString(t))}setButtonText(e,t){const i=e.querySelector(".videoplayer_share_action_text");i&&(i.innerHTML=t)}createRootElement(){const e=document.createElement("div");return e.classList.add("videoplayer_share_actions"),e}createStyles(){const e=document.createElement("style");return e.innerText="\n  .videoplayer_share_actions {\n    top: 0;\n    right: 0;\n    padding: 10px;\n    transition-property: transform, visibility, opacity;\n    transition-duration: 0.25s;\n    transition-timing-function: cubic-bezier(0.455, 0.03, 0.515, 0.955);\n    will-change: transform, opacity;\n  }\n\n  .videoplayer_ui._fullscreen .videoplayer_share_actions {\n    padding: 15px;\n  }\n\n  .videoplayer_ui[data-state='ended'] .videoplayer_share_actions {\n    padding: 15px;\n  }\n\n  .videoplayer_ui._fullscreen[data-state='ended'] .videoplayer_share_actions {\n    padding: 30px 40px 0 0;\n  }\n\n  .videoplayer_share_actions.m-hidden {\n    visibility: hidden;\n    transform: translateY(-50px);\n    opacity: 0;\n  }\n\n  .videoplayer_share_action {\n    position: relative;\n    overflow: hidden;\n    float: left;\n    width: 40px;\n    height: 40px;\n    margin-left: 8px;\n    border-radius: 8px;\n    background-color: var(--black_alpha72);\n    background-size: 24px;\n    line-height: 40px;\n    color: var(--white_alpha72);\n    font-size: 13px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .videoplayer_share_action:hover {\n    background-color: var(--black_alpha56);\n    color: var(--white);\n  }\n  \n  .videoplayer_share_action.m-goods {\n    width: auto;\n    padding: 0 16px 0 12px;\n  }\n  \n  .videoplayer_share_action.m-red {\n    color: var(--red_nice);\n  }\n  \n  .videoplayer_share_action_icon {\n    display: flex;\n    opacity: 0.8;\n  }\n  \n  .videoplayer_share_action.m-hidden {\n    display: none;\n  }\n  \n  .videoplayer_share_action:hover .videoplayer_share_action_icon {\n    opacity: 1;\n  }\n   \n  .videoplayer_share_actions ._bookmarked {\n    color: var(--white);\n  }\n  \n  .videoplayer_share_action_text {\n    margin-left: 8px;\n  }\n",e}createButton(e){const t=document.createElement("div");if(e.classes&&e.classes.length&&t.classList.add(...e.classes),e.icon&&(t.classList.add("videoplayer_share_action"),t.appendChild(this.createIcon(e.icon))),e.activeIcon&&(t.classList.add("videoplayer_share_action"),t.appendChild(this.createIcon(e.activeIcon))),e.innerText){const i=document.createElement("div");i.classList.add("videoplayer_share_action_text"),i.innerHTML=e.innerText,t.appendChild(i)}return e.tooltipText&&this.attachTooltip({el:t,text:e.tooltipText,toDown:!0,hideDelay:200}),e.handler&&t.addEventListener("click",e.handler),t}getBookmarkIcon(e=!1){return(0,y.partConfigEnabled)("video_bookmarks_renaming_to_watch_later")?e?(0,h.getIcon24Clock)().icon:(0,c.getIcon24ClockOutline)().icon:e?(0,u.getIcon24Favorite)().icon:(0,g.getIcon24FavoriteOutline)().icon}attachTooltip(e){let t=0;e.el.addEventListener("mouseenter",(()=>{this.tooltip?.isVisible()||Date.now()-(this.tooltip?.lastShown||0)<100?this.tooltip?.show(e):t=window.setTimeout((()=>this.tooltip?.show(e)),1e3)})),e.el.addEventListener("mouseleave",(()=>{clearTimeout(t),e.hideDelay?this.tooltip?.hideWithDelay(e.hideDelay):this.tooltip?.hide()})),e.el.addEventListener("click",(()=>{clearTimeout(t),e.hideOnClick?this.tooltip?.hide():setTimeout((()=>this.tooltip?.show(e)),0)}))}createIcon(e){const t=document.createElement("div");return t.classList.add("videoplayer_share_action_icon"),t.appendChild(this.compileSVGString(e)),t}compileSVGString(e){const t=document.createElement("div");t.innerHTML=e;const i=t.firstChild;return t.remove(),i}debugLog(e){if(window?.videoPlayerConfig.debugLogs)try{window.console.warn(...["%c videoplayer ","background:#9ddcf7;"].concat(e))}catch(e){}}constructor(e={}){this.styleSheet=null,this.goodsButton=null,this.donatButton=null,this.likeButton=null,this.shareButton=null,this.favButton=null,this.addButton=null,this.tooltip=null,this.state={isVisible:!1,isFullscreen:!1,isGoodsVisible:!1,isDonatVisible:!1,isLikeVisible:!1,isShareVisible:!1,isFavVisible:!1,isAddVisible:!1,liked:!1,shared:!1,bookmarked:!1,added:!1},this.eventBus=new p.default,this.i18n={},Object.assign(this.state,e),this.root=this.createRootElement(),this.render()}}},890162:(e,t,i)=>{i.d(t,{VideoExpandHint:()=>n});class n{setText(e){this.text=e,this.textWrapper&&(this.textWrapper.innerText=this.text)}show(){this.el?.classList.remove("m-hidden")}hide(){this.el?.classList.add("m-hidden")}render(){this.el=document.createElement("div"),this.el.classList.add("video_expand_hint"),this.textWrapper=document.createElement("span"),this.textWrapper.innerText=this.text,this.el.append(this.textWrapper);const e=document.createElement("style");return e.innerText="\n  .video_expand_hint {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    padding-top: 60px;\n    text-align: center;\n    сolor: var(--white);\n    font-size: 13px;\n    font-weight: 700;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    text-align: center;\n    text-shadow: 0 0 5px var(--black_alpha72);\n    cursor: pointer;\n    transition: visibility .2s, opacity .2s, top var(--videoplayer-controls-transition-duration) var(--videoplayer-controls-transition-fn);\n  }\n\n  .video_expand_hint.m-hidden {\n    display: none\n  }\n",this.el.append(e),this.el}constructor(e){this.text="",this.el=null,this.textWrapper=null,this.setText(e)}}},837759:(e,t,i)=>{i.d(t,{VideoPageHistory:()=>h,getVideoHistoryUrl:()=>c,mapVideoFullToVideoHistory:()=>v,mapVideoHistoryToLegacyVideo:()=>u,mapVideoOtherLegacyToVideoHistory:()=>p,mapVideoPlaylistLegacyToVideoHistory:()=>g});var n=i(8520),s=i(873900),o=i(768035),r=i(468073),a=i(856289),d=i(841315),l=i(540462);const h={recommendations:[],history:{videos:[],currentPosition:-1},playlist:{videos:[],currentPosition:-1,isReversed:!1,repeat:"",firstVideo:null,lastVideo:null},isActivePlaylist:!1,getRecomVideos(){return this.recommendations},getRepeatVideo(e){if(!this.isActivePlaylist)return;return(this.playlist.isReversed?"prev"===e:"next"===e)?this.playlist.firstVideo??this.playlist.videos.at(0):this.playlist.lastVideo??this.playlist.videos.at(-1)},getOutOfPlaylistPrevVideo(){return"all"!==this.playlist.repeat?null:this.getRepeatVideo("prev")},getOutOfPlaylistNextVideo(){return"all"!==this.playlist.repeat?this.recommendations[0]:this.getRepeatVideo("next")},getNextVideo(){if(this.isActivePlaylist){const e=this.playlist.isReversed?-1:1,t=this.playlist.currentPosition+e;return this.playlist.videos[t]??this.getOutOfPlaylistNextVideo()??null}return this.history.videos[this.history.currentPosition+1]??this.recommendations[0]??null},getPrevVideo(){if(this.isActivePlaylist){const e=this.playlist.isReversed?-1:1,t=this.playlist.currentPosition-e;return this.playlist.videos[t]??this.getOutOfPlaylistPrevVideo()??null}return this.history.videos[this.history.currentPosition-1]??null},getCurrentVideo(){return this.history.videos[this.history.currentPosition]??null},getCurrentPosition(){return this.isActivePlaylist?this.playlist.currentPosition:this.history.currentPosition},shiftNextVideo(e){if(this.isActivePlaylist){const e=this.playlist.isReversed?-1:1;return this.playlist.currentPosition+=e,this.playlist.videos[this.playlist.currentPosition]??this.getOutOfPlaylistNextVideo()??null}e&&this.getCurrentVideo()&&this.history.videos.splice(this.history.currentPosition+1);let t=this.recommendations[0];return this.history.currentPosition<this.history.videos.length-1&&(this.history.currentPosition++,t=this.history.videos[this.history.currentPosition]??t),t??null},setRecomVideos(e){this.recommendations=e},setPlaylist(e){this.playlist=e},setIsActivePlaylist(e){this.isActivePlaylist=e},getPrevVideos(){const e=this.history.videos.slice(0,this.history.currentPosition);if(!this.isActivePlaylist)return e;const t=this.playlist.isReversed?this.playlist.videos.slice(this.playlist.currentPosition+1).reverse():this.playlist.videos.slice(0,this.playlist.currentPosition);return"all"!==this.playlist.repeat||t.length||t.push(this.getRepeatVideo("prev")),[...e,...t]},getNextVideos(){if(this.isActivePlaylist){const e=this.playlist.isReversed?this.playlist.videos.slice(0,this.playlist.currentPosition).reverse():this.playlist.videos.slice(this.playlist.currentPosition+1);return"all"!==this.playlist.repeat||e.length||e.push(this.getRepeatVideo("next")),[...e,...this.recommendations]}const e=this.history.videos.slice(this.history.currentPosition+1);return(0,l.partConfigEnabled)("use_uv_videoplayer_on_web")&&e.push(...this.recommendations),e},shiftPrevVideo(){if(this.isActivePlaylist){const e=this.playlist.isReversed?-1:1;return this.playlist.currentPosition-=e,this.playlist.videos[this.playlist.currentPosition]??this.getOutOfPlaylistPrevVideo()??this.history.videos[this.history.currentPosition-1]??null}return 0===this.history.currentPosition?null:(this.history.currentPosition--,this.history.videos[this.history.currentPosition]??null)},pushVideoToHistory(e){const t=this.findVideoInHistory(e);null!==t&&t>=-1&&t<=1?this.history.currentPosition+=t:(e.playlistId&&this.history.videos[this.history.currentPosition]?.playlistId||this.history.currentPosition++,this.history.videos.splice(this.history.currentPosition),this.history.videos.push(e))},findVideoInHistory(e){const t=this.history.videos.findIndex((t=>e.id===t.id));return-1===t?null:t-this.history.currentPosition},clearHistory(){this.history={videos:[],currentPosition:-1},this.setIsActivePlaylist(!1);this.playlist={videos:[],currentPosition:-1,isReversed:!1,repeat:""}}};function c(e,t=!0){return(0,l.partConfigEnabled)("vkvideo_sport_domain")?e.href:(0,d.getVideoUrl)({id:e.id,owner_id:e.owner_id},{playlistId:e.playlistId,isAbsolute:t,isLinkedPlaylist:!0})}const u=e=>({vid:(0,s.getIdentityRawId)({id:e.id,ownerId:e.owner_id}),thumb:(0,a.getThumbSrcFromImages)(e.thumb),title:e.title,views:(0,a.getFormattedFullVideoViews)(e.views),link:e.href,ownerHref:e.owner.href,ownerName:e.owner.name,trackCode:e.track_code,playlistId:e.playlistId}),g=e=>{const{vid:t,title:i,link:s,thumb:r,trackCode:d,restrictionBlock:l,ownerName:h,ownerHref:c,duration:u,playlistId:g}=e,{id:p,ownerId:v}=(0,o.parseRawId)(t),y=(0,a.getThumbFromUrl)(r),m=y?[y]:[];return{id:p,href:s,title:(0,n.decodeHTMLEntities)(i),views:-1,thumb:m,duration:(0,a.parseDuration)(u),owner_id:v,playlistId:g,track_code:d,restriction:l?{title:"Возможно, это неприятный контент",blur:1,icon_name:"hide_outline"}:void 0,owner:{name:(0,n.decodeHTMLEntities)(h),href:c,verified:!1}}},p=e=>{const{vid:t,link:i,title:s,thumb:r,track_code:d,owner_name:l,owner_href:h,duration:c}=e,{id:u,ownerId:g}=(0,o.parseRawId)(t),p=(0,a.getThumbFromUrl)(r),v=p?[p]:[];return{id:u,href:i,title:(0,n.decodeHTMLEntities)(s),views:-1,thumb:v,duration:(0,a.parseDuration)(c),owner_id:g,playlistId:"",track_code:d,owner:{name:(0,n.decodeHTMLEntities)(l),href:h,verified:!1}}},v=(e,{playlistId:t,entitiesGroups:i}={})=>{const s=e.owner_id,o={id:e.id??-1,title:e.title?(0,n.decodeHTMLEntities)(e.title):"",views:e.views??-1,duration:e.duration??-1,thumb:e.image??[],href:e.direct_url??"",owner_id:s??-1,owner:{name:"",verified:!1,href:""},track_code:e.track_code,trailer:e.trailer,restriction:e.restriction,playlistId:t};if(!s||r.Ranges.isUserId(s)||!i)return o;const a=i[r.Ranges.convertOwnerIdToGroupId(s)];return a?.name&&(o.owner.name=(0,n.decodeHTMLEntities)(a.name),o.owner.verified=1===a.verified),o}},48921:(e,t,i)=>{i.d(t,{CARD_GAP:()=>s,CARD_WIDTH:()=>n,CustomEventName:()=>o});const n=128,s=12,o="VideoCustomEvent/GoodRecognition"},796634:(e,t,i)=>{i.d(t,{VK_MVK_APP_ID:()=>n.VK_MVK_APP_ID,VK_WEB_APP_ID:()=>n.VK_WEB_APP_ID});var n=i(586138)},428024:(e,t,i)=>{i.d(t,{logError:()=>n.logError});var n=i(298077)},332258:(e,t,i)=>{i.d(t,{saveProductionStats:()=>n.saveProductionStats,saveStatlogEvents:()=>n.saveStatlogEvents,writeAndSendWebStats:()=>n.writeAndSendWebStats});var n=i(101272)},840992:(e,t,i)=>{i.d(t,{VideoEditEvents:()=>n.VideoEditEvents,VideoEvents:()=>n.VideoEvents,VideoPlayerSyncEvents:()=>n.VideoPlayerSyncEvents,VideoPlaylistEvents:()=>n.VideoPlaylistEvents});var n=i(977780)},702650:(e,t,i)=>{i.d(t,{getVideoHistoryUrl:()=>n.getVideoHistoryUrl});var n=i(837759)},584720:(e,t,i)=>{i.d(t,{EndScreen:()=>h});var n=i(474848),s=i(783856),o=i(724648),r=i(132028),a=i(526828),d=i(243669),l=i(645248);const h=(0,r.createWidget)(a.EndScreenModelProvider,(()=>{const{userEnv:e}=(0,a.useEndScreenModel)(),t=e.partConfigEnabled("use_uv_videoplayer_on_web")?void 0:2;return(0,n.jsx)(s.Overlay,{className:l.default.endscreen,zIndex:t,Component:o.Flex,direction:"column",justify:"center",noWrap:!0,children:(0,n.jsx)(d.EndScreenContent,{})})}))},243669:(e,t,i)=>{i.d(t,{EndScreenContent:()=>a});var n=i(474848),s=i(456921),o=i(526828),r=i(741347);const a=(0,s.observer)((function(){const{isAnnouncementClosed:e,onAnnouncementClose:t,player:i,props:s}=(0,o.useEndScreenModel)(),{isAutoplay:a,width:d}=i,{currentVideo:l,nextVideos:h,onAnnouncementClick:c,onAnnouncementTimer:u,onSuggestionClick:g}=s.current;if(!h.length)return null;if(a&&!e){const e=h[0];return(0,n.jsx)(r.EndScreenAnnouncement,{nextVideo:e,currentVideo:l,playerWidth:d,onClick:c,onTimer:u,onClose:t})}return(0,n.jsx)(r.EndScreenSuggestions,{nextVideos:h,currentVideo:l,playerWidth:d,onSuggestionClick:g})}))},825709:(e,t,i)=>{i.d(t,{EndScreen:()=>n.EndScreen});var n=i(584720)},201468:(e,t,i)=>{i.d(t,{EndScreenModel:()=>d});var n=i(331635),s=i(327813),o=i(132028),r=i(24516),a=i(390539);class d{[o.init](){this.player.init()}[o.destroy](){this.player.destroy()}get isAnnouncementClosed(){return this._isAnnouncementClosed}constructor(e,t){this.props=e,this.userEnv=t,this.player=new a.EndScreenPlayerModel(this.props),this.onAnnouncementClose=()=>{this._isAnnouncementClosed=!0,this.props.current.onAnnouncementClose?.()},this._isAnnouncementClosed=this.props.current.isAnnouncementClosed,(0,s.makeAutoObservable)(this)}}d=(0,n.__decorate)([o.scope.transient(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===o.Props?Object:o.Props,void 0===r.UserEnv?Object:r.UserEnv])],d)},390539:(e,t,i)=>{i.d(t,{EndScreenPlayerModel:()=>o});var n=i(327813),s=i(840992);class o{get width(){return this._width}get isAutoplay(){return this._isAutoplay}init(){window.addEventListener(s.VideoPlaylistEvents.TOGGLE_AUTOPLAY,this.handleToggleAutoplay),window.addEventListener(s.VideoPlayerSyncEvents.RESIZE,this.handleResize)}destroy(){window.removeEventListener(s.VideoPlaylistEvents.TOGGLE_AUTOPLAY,this.handleToggleAutoplay),window.removeEventListener(s.VideoPlayerSyncEvents.RESIZE,this.handleResize)}constructor(e){this.props=e,this.handleToggleAutoplay=({detail:e})=>{this._isAutoplay=e},this.handleResize=({detail:{width:e}})=>{this._width=e},this._width=this.props.current.playerWidth,this._isAutoplay=this.props.current.autoplayStatus,(0,n.makeAutoObservable)(this)}}},526828:(e,t,i)=>{i.d(t,{EndScreenModelProvider:()=>o,useEndScreenModel:()=>r});var n=i(132028),s=i(201468);const{Provider:o,useModel:r}=(0,n.createProvider)(s.EndScreenModel)},433768:(e,t,i)=>{i.d(t,{EndScreenAnnouncement:()=>g});var n=i(474848),s=i(456921),o=i(15978),r=i(724648),a=i(829208),d=i(149333),l=i(132028),h=i(483397),c=i(212688);const u=(0,s.observer)((function(){const e=(0,d.useLangs)(),{videoCardVideo:t,size:i,time:s,handleClick:l,handleClose:u}=(0,h.useEndScreenAnnouncementModel)();return(0,n.jsx)(o.AppearanceProvider,{value:"dark",children:(0,n.jsx)(r.Flex,{className:c.default.announcement,justify:"center",align:"center",children:(0,n.jsx)(a.AnnouncementVideoCard,{video:{...t,href:void 0},size:i,timerSeconds:s,onClick:e=>{t.href&&(e.ctrlKey||e.metaKey)?window.open(t.href,"_blank"):l()},onCloseClick:u,timerText:e.getLang("video_next_video_in"),closeLabel:e.getLang("video_player_aria_close_announcement")})})})})),g=(0,l.createWidget)(h.EndScreenAnnouncementModelProvider,u)},47455:(e,t,i)=>{i.d(t,{ANNOUNCEMENT_PLAYER_WIDTH_SIZES:()=>o,ANNOUNCEMENT_PREVIEW_MIN_WIDTH:()=>s,ANNOUNCEMENT_TIMER:()=>n});const n=7,s=480,o=[{minWidth:1680,size:"2xl"},{minWidth:1440,size:"xl"},{minWidth:1200,size:"l"},{minWidth:900,size:"m"},{minWidth:0,size:"s"}]},355558:(e,t,i)=>{i.d(t,{EndScreenAnnouncement:()=>n.EndScreenAnnouncement});var n=i(433768)},137138:(e,t,i)=>{i.d(t,{EndScreenAnnouncementModel:()=>c});var n=i(331635),s=i(327813),o=i(132028),r=i(655758),a=i(809424),d=i(406751),l=i(613828),h=i(47455);class c{[o.init](){this.startTimer(),this.logEvent("show")}[o.destroy](){clearInterval(this._timer)}get currentVideo(){return this.props.current.currentVideo}get nextVideo(){return this.props.current.nextVideo}get size(){return(0,l.getAnnouncementSize)(this.props.current.playerWidth)}get time(){return String(this._time)}get videoCardVideo(){return{...(0,d.mapVideoToVideoCardItem)(this.nextVideo),thumbSrc:(0,d.getThumbSrcFromImages)(this.nextVideo.thumb,h.ANNOUNCEMENT_PREVIEW_MIN_WIDTH),owner:this.nextVideo.owner}}handleTimer(){this.props.current.onTimer(this.nextVideo),this.logEvent("auto")}startTimer(){clearInterval(this._timer),this._timer=setInterval((()=>{const e=this._time-1;e<=0&&(this.handleTimer(),clearInterval(this._timer)),this._time=Math.max(e,0)}),1e3)}logEvent(e){const t={item:{...this.currentVideo,type:"video"},type:"type_next_video_announcement_click",type_next_video_announcement_click:{event_subtype:e,destination_item:{id:this.nextVideo.id,owner_id:this.nextVideo.owner_id}}};this.productionStats.send({screen:this.metaData.get().screen,type:"type_click",type_click:t})}constructor(e,t,i){this.productionStats=e,this.metaData=t,this.props=i,this.handleClick=()=>{this.props.current.onClick(this.nextVideo),this.logEvent("click")},this.handleClose=()=>{this.props.current.onClose(),this.logEvent("cancel")},this._time=h.ANNOUNCEMENT_TIMER,this._timer=void 0,(0,s.makeAutoObservable)(this)}}c=(0,n.__decorate)([o.scope.transient(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===r.ProductionStats?Object:r.ProductionStats,void 0===a.MetaData?Object:a.MetaData,void 0===o.Props?Object:o.Props])],c)},483397:(e,t,i)=>{i.d(t,{EndScreenAnnouncementModelProvider:()=>o,useEndScreenAnnouncementModel:()=>r});var n=i(132028),s=i(137138);const{Provider:o,useModel:r}=(0,n.createProvider)(s.EndScreenAnnouncementModel)},88670:(e,t,i)=>{i.d(t,{getAnnouncementSize:()=>s});var n=i(47455);const s=e=>n.ANNOUNCEMENT_PLAYER_WIDTH_SIZES.find((({minWidth:t})=>e>=t))?.size??"s"},613828:(e,t,i)=>{i.d(t,{getAnnouncementSize:()=>n.getAnnouncementSize});var n=i(88670)},907434:(e,t,i)=>{i.d(t,{EndScreenSuggestions:()=>h});var n=i(474848),s=i(456921),o=i(132028),r=i(255779),a=i(699831),d=i(846797);const l=(0,s.observer)((function(){const{props:e,onSuggestionClick:t}=(0,d.useEndScreenSuggestionsModel)(),{nextVideos:i,playerWidth:s}=e.current;if(s<a.SUGGESTIONS_GRID_PLAYER_MIN_WIDTH)return(0,n.jsx)(r.EndScreenSuggestionsSlider,{videos:i,onSuggestionClick:t});const o=s>=a.SUGGESTIONS_LARGE_GRID_PLAYER_MIN_WIDTH,l=Math.min(o?a.SUGGESTIONS_LARGE_GRID_COLUMNS_COUNT:a.SUGGESTIONS_GRID_COLUMNS_COUNT,i.length),h=o?a.SUGGESTIONS_LARGE_GRID_VIDEOS_COUNT:a.SUGGESTIONS_GRID_VIDEOS_COUNT;return(0,n.jsx)(r.EndScreenSuggestionsGrid,{videos:i.slice(0,h),onSuggestionClick:t,columnsCount:l})})),h=(0,o.createWidget)(d.EndScreenSuggestionsModelProvider,l)},386708:(e,t,i)=>{i.d(t,{EndScreenSuggestionCard:()=>d});var n=i(474848),s=i(220208),o=i(618068),r=i(406751),a=i(702650);const d=({video:e,onClick:t})=>{const i={...(0,r.mapVideoToVideoCardItem)(e),href:(0,a.getVideoHistoryUrl)(e,!1),thumbSrc:(0,r.getThumbSrcFromImages)(e.thumb),owner:{...e.owner,href:""},additionalInfo:void 0};return(0,n.jsx)(s.Tappable,{tabIndex:-1,onClick:n=>{i.href&&(n.ctrlKey||n.metaKey)?window.open(i.href,"_blank"):t(e)},children:(0,n.jsx)(o.VideoCard,{video:{...i,href:void 0},noAvatar:!0,focusOutlined:!0})})}},846447:(e,t,i)=>{i.d(t,{EndScreenSuggestionCard:()=>n.EndScreenSuggestionCard});var n=i(386708)},648694:(e,t,i)=>{i.d(t,{EndScreenSuggestionsGrid:()=>h});var n=i(474848),s=i(724648),o=i(15978),r=i(591378),a=i(873900),d=i(846447),l=i(791562);const h=({videos:e,columnsCount:t,onSuggestionClick:i})=>(0,n.jsx)(s.Flex,{className:l.default.container,justify:"center",align:"center",children:(0,n.jsx)(o.AppearanceProvider,{value:"dark",children:(0,n.jsx)(r.Grid,{columns:t,spacing:12,children:e.map((e=>(0,n.jsx)(r.Grid.Item,{children:(0,n.jsx)(d.EndScreenSuggestionCard,{video:e,onClick:i})},(0,a.getIdentityRawId)({id:e.id,ownerId:e.owner_id}))))})})})},783102:(e,t,i)=>{i.d(t,{EndScreenSuggestionsGrid:()=>n.EndScreenSuggestionsGrid});var n=i(648694)},132172:(e,t,i)=>{i.d(t,{EndScreenSuggestionsSlider:()=>u});var n=i(474848),s=i(15978),o=i(724648),r=i(591378),a=i(873900),d=i(846447),l=i(967842),h=i(122142),c=i(205996);const u=({videos:e,onSuggestionClick:t})=>(0,n.jsx)(s.AppearanceProvider,{value:"light",children:(0,n.jsx)(o.Flex,{className:c.default.container,direction:"column",justify:"center",noWrap:!0,children:(0,n.jsx)(r.Grid,{columns:2,spacing:l.SUGGESTION_SLIDER_CARD_GAP,children:(0,n.jsx)(r.Grid.HorizontalScroll,{arrowSize:"m",showArrows:"always",arrowOffsetY:l.SUGGESTION_SLIDER_ARROW_OFFSET_Y,getScrollToLeft:h.handleScrollToLeft,getScrollToRight:h.handleScrollToRight,children:(0,n.jsx)(s.AppearanceProvider,{value:"dark",children:e.map((e=>(0,n.jsx)(r.Grid.Item,{className:c.default.sliderCard,children:(0,n.jsx)(d.EndScreenSuggestionCard,{video:e,onClick:t})},(0,a.getIdentityRawId)({id:e.id,ownerId:e.owner_id}))))})})})})})},967842:(e,t,i)=>{i.d(t,{SUGGESTION_SLIDER_ARROW_OFFSET_Y:()=>o,SUGGESTION_SLIDER_CARD_GAP:()=>s,SUGGESTION_SLIDER_CARD_MIN_WIDTH:()=>n});const n=172,s=12,o=-34},788391:(e,t,i)=>{i.d(t,{EndScreenSuggestionsSlider:()=>n.EndScreenSuggestionsSlider});var n=i(132172)},122142:(e,t,i)=>{i.d(t,{handleScrollToLeft:()=>s,handleScrollToRight:()=>o});var n=i(967842);const s=e=>e-2*(n.SUGGESTION_SLIDER_CARD_MIN_WIDTH+n.SUGGESTION_SLIDER_CARD_GAP),o=e=>e+2*(n.SUGGESTION_SLIDER_CARD_MIN_WIDTH+n.SUGGESTION_SLIDER_CARD_GAP)},255779:(e,t,i)=>{i.d(t,{EndScreenSuggestionsGrid:()=>n.EndScreenSuggestionsGrid,EndScreenSuggestionsSlider:()=>s.EndScreenSuggestionsSlider});var n=i(783102),s=i(788391)},699831:(e,t,i)=>{i.d(t,{SUGGESTIONS_GRID_COLUMNS_COUNT:()=>n,SUGGESTIONS_GRID_PLAYER_MIN_WIDTH:()=>a,SUGGESTIONS_GRID_VIDEOS_COUNT:()=>o,SUGGESTIONS_LARGE_GRID_COLUMNS_COUNT:()=>s,SUGGESTIONS_LARGE_GRID_PLAYER_MIN_WIDTH:()=>d,SUGGESTIONS_LARGE_GRID_VIDEOS_COUNT:()=>r});const n=3,s=4,o=6,r=8,a=900,d=1440},855454:(e,t,i)=>{i.d(t,{EndScreenSuggestions:()=>n.EndScreenSuggestions});var n=i(907434)},795258:(e,t,i)=>{i.d(t,{EndScreenSuggestionsModel:()=>d});var n=i(331635),s=i(327813),o=i(655758),r=i(809424),a=i(132028);class d{[a.init](){const e={type:"type_next_video_announcement_suggested_show",type_next_video_announcement_suggested_show:{item:this.props.current.currentVideo,count:this.props.current.nextVideos.length}};this.productionStats.send({screen:this.metaData.get().screen,type:"type_action",type_action:e})}logSuggestionClick(e){const t={item:{...this.props.current.currentVideo,type:"video"},type:"type_next_video_announcement_suggested_click",type_next_video_announcement_suggested_click:{destination_item:{id:e.id,owner_id:e.owner_id}}};this.productionStats.send({screen:this.metaData.get().screen,type:"type_click",type_click:t})}constructor(e,t,i){this.productionStats=e,this.metaData=t,this.props=i,this.onSuggestionClick=e=>{this.props.current.onSuggestionClick(e),this.logSuggestionClick(e)},(0,s.makeAutoObservable)(this)}}d=(0,n.__decorate)([a.scope.transient(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===o.ProductionStats?Object:o.ProductionStats,void 0===r.MetaData?Object:r.MetaData,void 0===a.Props?Object:a.Props])],d)},846797:(e,t,i)=>{i.d(t,{EndScreenSuggestionsModelProvider:()=>o,useEndScreenSuggestionsModel:()=>r});var n=i(132028),s=i(795258);const{Provider:o,useModel:r}=(0,n.createProvider)(s.EndScreenSuggestionsModel)},741347:(e,t,i)=>{i.d(t,{EndScreenAnnouncement:()=>n.EndScreenAnnouncement,EndScreenSuggestions:()=>s.EndScreenSuggestions});var n=i(355558),s=i(855454)},222069:(e,t,i)=>{i.d(t,{SuggestionsOverlayManager:()=>n});class n{get status(){return this._status}render(){if(!this.renderMethod||!this.currentVideo||!this.nextVideos.length)return void(this._status=!1);this.destroy();const e=document.createElement("div");return e.tabIndex=0,e.style.position="absolute",e.style.inset="0",this.unmountMethod=this.renderMethod(e,{currentVideo:this.currentVideo,nextVideos:this.nextVideos,autoplayStatus:this.getAutoplayStatus(),playerWidth:this.getPlayerWidth(),isAnnouncementClosed:this.isAnnouncementClosed,onAnnouncementClose:()=>this.setAnnouncementClosed(!0),onVideoClick:e=>{this.destroy(),this.onVideoClick(e)}},this.diContainer),this._status=!0,e.focus(),e}destroy(){this.unmountMethod?.(),this.unmountMethod=null,this._status=!1}updateVideoData(e,t){this.currentVideo=e,this.nextVideos=t,this._status&&this.render()}async setRenderMethod(){if(this.renderMethod)return;const{renderSuggestionsOverlay:e}=await Promise.all([i.e(74074),i.e("langs/web/SuggestionsOverlayRender")]).then(i.bind(i,766108));this.renderMethod=e}setAnnouncementClosed(e){this.isAnnouncementClosed=e}constructor(e){this.renderMethod=null,this.unmountMethod=null,this.currentVideo=null,this.nextVideos=[],this.isAnnouncementClosed=!1,this._status=!1,this.onVideoClick=e.onVideoClick,this.getPlayerWidth=e.getPlayerWidth,this.getAutoplayStatus=e.getAutoplayStatus,this.diContainer=e.diContainer}}},449535:(e,t,i)=>{i.d(t,{SuggestionsOverlayManager:()=>n.SuggestionsOverlayManager});var n=i(222069)},423556:(e,t,i)=>{i.d(t,{ensureVideoEmbedDIContainer:()=>u});var n=i(132028),s=i(712600),o=i(24516),r=i(809424),a=i(268688),d=i(955060),l=i(428024),h=i(439142);let c;function u(){return c||(c=n.rootContainer.child("video-embed"),c.replace(s.Langs,h.BrowserLangs),c.replace(o.UserEnv,h.BrowserUserEnv),c.replace(r.MetaData,h.MetaDataImpl),c.replace(a.Analytics,h.BrowserAnalytics),c.resolve(d.ErrorLogger).init(l.logError),c)}},533768:(e,t,i)=>{i.d(t,{BrowserAnalytics:()=>r});var n=i(331635),s=i(132028),o=i(332258);class r{sendProductionStats(e,t){(0,o.saveProductionStats)(e,t)}sendBenchmarkMainStats(){throw new Error("Method not implemented")}sendCustomStats(){throw new Error("Method not implemented")}sendNetworkStats(){throw new Error("Method not implemented")}sendStatlogEvents(){throw new Error("Method not implemented")}sendStoryViewStats(){throw new Error("Method not implemented")}sendWebPerfStats(){throw new Error("Method not implemented")}sendWebStatsWithoutQueue(){throw new Error("Method not implemented")}constructor(){this.DEBUG=!1}}r=(0,n.__decorate)([s.scope.global()],r)},733913:(e,t,i)=>{i.d(t,{BrowserLangs:()=>a});var n=i(331635),s=i(132028),o=i(712600),r=i(558845);class a extends o.Langs{getLang(e,t=!1){return t?(0,r.getLang)(e,"raw"):(0,r.getLang)(e)}numeric(){throw new Error("Method not implemented")}sex(){throw new Error("Method not implemented")}date(){throw new Error("Method not implemented")}get locale(){throw new Error("Method not implemented")}}a=(0,n.__decorate)([s.scope.platform()],a)},412214:(e,t,i)=>{i.d(t,{BrowserUserEnv:()=>r});var n=i(331635),s=i(132028),o=i(289475);class r{partConfigEnabled(e){return(0,o.partConfigEnabled)(e)}getConfigValue(){throw new Error("Method not implemented")}}r=(0,n.__decorate)([s.scope.global()],r)},17011:(e,t,i)=>{i.d(t,{MetaDataImpl:()=>l});var n=i(331635),s=i(132028),o=i(809424),r=i(773439),a=i(796634);const d=(0,r.isMobile)()?a.VK_MVK_APP_ID:a.VK_WEB_APP_ID;class l extends o.MetaData{get(){if(!Boolean(window.vk?.apiConfigDomains?.apiDomain))throw new Error("Api domain not found");if(!Boolean(window.vk?.apiConfigDomains?.loginDomain))throw new Error("Login domain not found");if(!Boolean(window.vk?.apiConfigDomains?.connectDomain))throw new Error("Connect domain not found");return{module:"embed",screen:"embed",moduleDisabled:Boolean(window.cur?.moduleDisabled),platformId:d,platformSecret:"",domains:{api:window.vk?.apiConfigDomains?.apiDomain,login:window.vk?.apiConfigDomains?.loginDomain,connect:window.vk?.apiConfigDomains?.connectDomain},statsMeta:{time:window.vk?.statsMeta?.time,st:window.vk?.statsMeta?.st,platform:window.vk?.statsMeta?.platform,hash:window.vk?.statsMeta?.hash},wsTransport:window.vk?.wsTransport,isSearchBot:Boolean(window.vk?.isSearchBot)}}}l=(0,n.__decorate)([s.scope.global()],l)},439142:(e,t,i)=>{i.d(t,{BrowserAnalytics:()=>n.BrowserAnalytics,BrowserLangs:()=>s.BrowserLangs,BrowserUserEnv:()=>o.BrowserUserEnv,MetaDataImpl:()=>r.MetaDataImpl});var n=i(533768),s=i(733913),o=i(412214),r=i(17011)},612251:(e,t,i)=>{i.d(t,{ensureVideoEmbedDIContainer:()=>n.ensureVideoEmbedDIContainer});var n=i(423556)},915795:(e,t,i)=>{i.d(t,{EndScreen:()=>n.EndScreen,SuggestionsOverlayManager:()=>s.SuggestionsOverlayManager,ensureVideoEmbedDIContainer:()=>o.ensureVideoEmbedDIContainer});var n=i(825709),s=i(449535),o=i(612251)},145674:(e,t,i)=>{i.d(t,{TheaterModeService:()=>h});var n=i(331635),s=i(327813),o=i(132028),r=i(712600),a=i(550490),d=i(317929),l=i(803614);class h{get text(){return this.isEnabled?this.langs.getLang("video_theater_mode_disable_hint"):this.langs.getLang("video_theater_mode_enable_hint")}get icon(){return this.isEnabled?l.ENABLED_ICON:l.DISABLED_ICON}constructor(e,t){this.langs=e,this.cookie=t,this.build=()=>({id:l.BUTTON_ID,weight:l.BUTTON_WEIGHT,type:d.ControlButtonType.DESKTOP_CONTROL_PANEL_RIGHT,iconUrl:"",icon:this.icon,ariaLabel:this.text,tooltipText:this.text,onClick:this.toggle}),this.hide=()=>{this.isShown&&this.player&&(this.player.removeAdditionalButton(l.BUTTON_ID),this.isShown=!1)},this.show=()=>{!this.isShown&&this.player&&(this.player.addAdditionalButton(this.build()),this.isShown=!0)},this.setPlayer=e=>{this.player=e},this.toggle=()=>{this.player&&(this.isEnabled=!this.isEnabled,this.cookie.set(l.THEATER_MODE_COOKIE_KEY,String(Number(this.isEnabled)),{expireDays:l.THEATER_MODE_COOKIE_EXPIRE_DAYS}),this.player.updateAdditionalButton(l.BUTTON_ID,{ariaLabel:this.text,tooltipText:this.text,icon:this.icon}),this.dispatchEvent())},this.dispatchEvent=()=>{const e=new CustomEvent(l.TOGGLE_THEATER_MODE_EVENT,{detail:{value:this.isEnabled}});window.dispatchEvent(e)},this.isEnabled=Boolean(Number(this.cookie.get(l.THEATER_MODE_COOKIE_KEY))),this.isShown=!0,(0,s.makeAutoObservable)(this)}}h=(0,n.__decorate)([o.scope.container(),(0,n.__metadata)("design:type",Function),(0,n.__metadata)("design:paramtypes",[void 0===r.Langs?Object:r.Langs,void 0===a.Cookie?Object:a.Cookie])],h)},803614:(e,t,i)=>{i.d(t,{BUTTON_ID:()=>d,BUTTON_WEIGHT:()=>l,DISABLED_ICON:()=>a,ENABLED_ICON:()=>r,THEATER_MODE_COOKIE_EXPIRE_DAYS:()=>o,THEATER_MODE_COOKIE_KEY:()=>s,TOGGLE_THEATER_MODE_EVENT:()=>n});const n="TOGGLE_THEATER_MODE",s="video_preferred_theater_mode",o=365,r="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGFyaWEtaGlkZGVuPSJ0cnVlIiBkaXNwbGF5PSJibG9jayIgY2xhc3M9InZrdWlJY29uIHZrdWlJY29uLS0yNCB2a3VpSWNvbi0tdy0yNCB2a3VpSWNvbi0taC0yNCB2a3VpSWNvbi0taG9yaXpvbnRhbF9yZWN0YW5nbGVfMTZ4OV9vdXRsaW5lXzI0IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2ZmZiIgc3R5bGU9IiI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjIuOTk5IDEwLjY2NXYyLjY3YzAgLjgwOSAwIDEuNDctLjA0NCAyLjAwNi0uMDQ1LjU1Ni0uMTQyIDEuMDU5LS4zODEgMS41MjdhMy45IDMuOSAwIDAgMS0xLjcwNSAxLjcwNWMtLjQ2OC4yMzktLjk3LjMzNS0xLjUyNi4zOC0uNTM4LjA0NS0xLjE5OC4wNDUtMi4wMDYuMDQ1SDYuNjYzYy0uODA4IDAtMS40NjkgMC0yLjAwNi0uMDQ0LS41NTYtLjA0Ni0xLjA1OC0uMTQyLTEuNTI3LS4zODFhMy45IDMuOSAwIDAgMS0xLjcwNC0xLjcwNWMtLjIzOS0uNDY4LS4zMzYtLjk3LS4zODEtMS41MjZDMSAxNC44MDMgMSAxNC4xNDMgMSAxMy4zMzV2LTIuNjdjMC0uODA5IDAtMS40Ny4wNDQtMi4wMDYuMDQ1LS41NTYuMTQyLTEuMDU4LjM4MS0xLjUyN0EzLjkgMy45IDAgMCAxIDMuMTMgNS40MjdjLjQ3LS4yMzkuOTcxLS4zMzYgMS41MjctLjM4LjUzNy0uMDQ1IDEuMTk4LS4wNDUgMi4wMDYtLjA0NWgxMC42NzRjLjgwOCAwIDEuNDY4IDAgMi4wMDYuMDQ0LjU1NS4wNDUgMS4wNTguMTQyIDEuNTI2LjM4MWEzLjkgMy45IDAgMCAxIDEuNzA1IDEuNzA1Yy4yMzkuNDY5LjMzNS45Ny4zOCAxLjUyNy4wNDUuNTM3LjA0NSAxLjE5Ny4wNDUgMi4wMDVabS0xLjgzOC0xLjg2Yy0uMDM2LS40NDUtLjEwMy0uNjgzLS4xOTEtLjg1NmEyLjEgMi4xIDAgMCAwLS45MTgtLjkxOGMtLjE3My0uMDg4LS40MTItLjE1NS0uODU2LS4xOS0uNDU1LS4wMzgtMS4wNDItLjAzOS0xLjg5Ny0uMDM5SDYuN2MtLjg1NSAwLTEuNDQyIDAtMS44OTcuMDM4LS40NDUuMDM2LS42ODQuMTAzLS44NTcuMTkxYTIuMSAyLjEgMCAwIDAtLjkxNy45MThjLS4wODguMTczLS4xNTUuNDExLS4xOTEuODU2LS4wMzcuNDU1LS4wMzggMS4wNDItLjAzOCAxLjg5N3YyLjU5NmMwIC44NTUgMCAxLjQ0Mi4wMzggMS44OTcuMDM2LjQ0NC4xMDMuNjgzLjE5Ljg1NmEyLjEgMi4xIDAgMCAwIC45MTguOTE4Yy4xNzMuMDg4LjQxMi4xNTUuODU3LjE5LjQ1NS4wMzggMS4wNDIuMDM5IDEuODk3LjAzOWgxMC41OThjLjg1NSAwIDEuNDQyIDAgMS44OTctLjAzOC40NDQtLjAzNi42ODMtLjEwMy44NTYtLjE5MWEyLjEgMi4xIDAgMCAwIC45MTgtLjkxOGMuMDg4LS4xNzMuMTU1LS40MTEuMTktLjg1Ni4wMzgtLjQ1NS4wMzktMS4wNDIuMDM5LTEuODk3di0yLjU5NmMwLS44NTUgMC0xLjQ0Mi0uMDM4LTEuODk3WiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",a="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGFyaWEtaGlkZGVuPSJ0cnVlIiBkaXNwbGF5PSJibG9jayIgY2xhc3M9InZrdWlJY29uIHZrdWlJY29uLS0yNCB2a3VpSWNvbi0tdy0yNCB2a3VpSWNvbi0taC0yNCB2a3VpSWNvbi0taG9yaXpvbnRhbF9yZWN0YW5nbGVfb3V0bGluZV8yNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9IiNmZmYiIHN0eWxlPSIiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIyIDEwLjQ2MnYzLjA3NmMwIC45NDggMCAxLjcxNC0uMDUgMi4zMzQtLjA1My42NC0uMTYzIDEuMjAzLS40MyAxLjcyNmE0LjQgNC40IDAgMCAxLTEuOTIyIDEuOTIyYy0uNTIzLjI2Ny0xLjA4Ny4zNzctMS43MjYuNDMtLjYyLjA1LTEuMzg2LjA1LTIuMzM0LjA1SDguNDYxYy0uOTQ3IDAtMS43MTMgMC0yLjMzMy0uMDUtLjY0LS4wNTMtMS4yMDMtLjE2My0xLjcyNi0uNDNhNC40IDQuNCAwIDAgMS0xLjkyMy0xLjkyMmMtLjI2Ni0uNTIzLS4zNzYtMS4wODctLjQyOC0xLjcyNkMyIDE1LjI1MiAyIDE0LjQ4NiAyIDEzLjUzOHYtMy4wNzZjMC0uOTQ4IDAtMS43MTQuMDUtMi4zMzQuMDUzLS42NC4xNjMtMS4yMDMuNDMtMS43MjZBNC40IDQuNCAwIDAgMSA0LjQwMSA0LjQ4Yy41MjMtLjI2NyAxLjA4Ny0uMzc3IDEuNzI2LS40M0M2Ljc0OCA0IDcuNTE0IDQgOC40NiA0aDcuMDc3Yy45NDggMCAxLjcxNCAwIDIuMzM0LjA1LjY0LjA1MyAxLjIwMy4xNjMgMS43MjYuNDNhNC40IDQuNCAwIDAgMSAxLjkyMiAxLjkyMmMuMjY3LjUyMy4zNzcgMS4wODcuNDMgMS43MjYuMDUuNjIuMDUgMS4zODYuMDUgMi4zMzRabS0xLjg0NS0yLjE4OGMtLjA0My0uNTI3LS4xMjMtLjgyOC0uMjM5LTEuMDU0YTIuNiAyLjYgMCAwIDAtMS4xMzYtMS4xMzdjLS4yMjYtLjExNS0uNTI3LS4xOTUtMS4wNTUtLjIzOC0uNTM4LS4wNDQtMS4yMy0uMDQ1LTIuMjI1LS4wNDVoLTdjLS45OTUgMC0xLjY4NyAwLTIuMjI2LjA0NS0uNTI4LjA0My0uODI4LjEyMy0xLjA1NC4yMzhBMi42IDIuNiAwIDAgMCA0LjA4MyA3LjIyYy0uMTE1LjIyNi0uMTk1LjUyNy0uMjM4IDEuMDU0QzMuOCA4LjgxMyAzLjggOS41MDUgMy44IDEwLjV2M2MwIC45OTUgMCAxLjY4Ny4wNDUgMi4yMjYuMDQzLjUyNy4xMjMuODI4LjIzOCAxLjA1NGEyLjYgMi42IDAgMCAwIDEuMTM3IDEuMTM3Yy4yMjYuMTE1LjUyNi4xOTUgMS4wNTQuMjM4LjUzOS4wNDQgMS4yMzEuMDQ1IDIuMjI2LjA0NWg3Yy45OTUgMCAxLjY4NyAwIDIuMjI1LS4wNDUuNTI4LS4wNDMuODI5LS4xMjMgMS4wNTUtLjIzOGEyLjYgMi42IDAgMCAwIDEuMTM2LTEuMTM3Yy4xMTYtLjIyNi4xOTYtLjUyNy4yNC0xLjA1NS4wNDMtLjUzOC4wNDQtMS4yMy4wNDQtMi4yMjV2LTNjMC0uOTk1IDAtMS42ODctLjA0NS0yLjIyNiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+",d="theater-mode-button",l=500},452787:(e,t,i)=>{i.d(t,{THEATER_MODE_COOKIE_KEY:()=>n.THEATER_MODE_COOKIE_KEY,TOGGLE_THEATER_MODE_EVENT:()=>n.TOGGLE_THEATER_MODE_EVENT,TheaterModeService:()=>s.TheaterModeService});var n=i(803614),s=i(145674)},645248:(e,t,i)=>{i.d(t,{default:()=>n});const n={endscreen:"EndScreen__endscreen--s7Dee"}},212688:(e,t,i)=>{i.d(t,{default:()=>n});const n={announcement:"EndScreenAnnouncement__announcement--4GLIx"}},791562:(e,t,i)=>{i.d(t,{default:()=>n});const n={container:"EndScreenSuggestionsGrid__container--rlJvC"}},205996:(e,t,i)=>{i.d(t,{default:()=>n});const n={container:"EndScreenSuggestionsSlider__container--boziz",sliderCard:"EndScreenSuggestionsSlider__sliderCard--lLW1h"}},864028:(e,t,i)=>{i.d(t,{Icon24BugOutline:()=>o});var n=i(474848),s=(i(296540),i(506447));const o=e=>(0,n.jsxs)(s.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"bug_outline_24",vkuiAttrs:{fill:"currentColor"},vkuiProps:e,children:[(0,n.jsx)("path",{d:"M10.5 10.4a.9.9 0 0 1 .9-.9h1.2a.9.9 0 1 1 0 1.8h-1.2a.9.9 0 0 1-.9-.9m0 5a.9.9 0 0 1 .9-.9h1.2a.9.9 0 1 1 0 1.8h-1.2a.9.9 0 0 1-.9-.9"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M3 8a.9.9 0 0 1 .9-.9h2.275a6.9 6.9 0 0 1 1.77-1.883l-1.681-1.68a.9.9 0 0 1 1.272-1.273l2.065 2.064A6.9 6.9 0 0 1 12 3.9c.844 0 1.652.151 2.399.428l2.065-2.064a.9.9 0 0 1 1.272 1.272l-1.68 1.681a6.9 6.9 0 0 1 1.77 1.883H20.1a.9.9 0 1 1 0 1.8h-1.465c.173.604.265 1.241.265 1.9v1.3h3.2a.9.9 0 1 1 0 1.8h-3.2V15c0 .732-.114 1.438-.325 2.1H20.1a.9.9 0 1 1 0 1.8h-2.407a6.9 6.9 0 0 1-5.693 3 6.9 6.9 0 0 1-5.693-3H3.9a.9.9 0 0 1 0-1.8h1.525A6.9 6.9 0 0 1 5.1 15v-1.1H1.9a.9.9 0 0 1 0-1.8h3.2v-1.3c0-.659.092-1.296.265-1.9H3.9A.9.9 0 0 1 3 8m3.9 2.8a5.1 5.1 0 1 1 10.2 0V15a5.1 5.1 0 0 1-10.2 0z",clipRule:"evenodd"}),(0,n.jsx)("path",{fillRule:"evenodd",d:"M10.5 10.4a.9.9 0 0 1 .9-.9h1.2a.9.9 0 1 1 0 1.8h-1.2a.9.9 0 0 1-.9-.9m0 5a.9.9 0 0 1 .9-.9h1.2a.9.9 0 1 1 0 1.8h-1.2a.9.9 0 0 1-.9-.9",clipRule:"evenodd"})]})}}])}if("undefined"!=typeof window&&window.partConfigEnabled?.("static_loading_execute_errors"))try{e(),window.stManager?.done?.("dist/web/chunks/2dca7225.e9007d53.js")}catch(e){throw window.stManager?.fail?.("dist/web/chunks/2dca7225.e9007d53.js",e),e}else e(),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/2dca7225.e9007d53.js");